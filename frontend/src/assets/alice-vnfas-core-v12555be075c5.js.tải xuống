var wallet={cookieName:"wallet_balance",pageType:!1,walletPopup:!1,container:$(".js-walletPopup"),initialize:function(){void 0!==window.store.pageType&&(this.pageType=window.store.pageType),void 0!==window.store.walletPopup&&(this.walletPopup=window.store.walletPopup),this.sync(),this.walletPopup&&this.show()},sync:function(){$(".js-topLink__wallet").on("click",function(){wallet.show()}),$(".js-walletPopup__buttonOk").on("click",function(){wallet.hide()&&(void 0!==ga&&!1!==wallet.pageType&&ga("send","event","Wallet Credit","Button Click | Okay got it",wallet.pageType),wallet.setCookie())}),$(document).mouseup(function(e){wallet.container.is(e.target)||0!==wallet.container.has(e.target).length||wallet.hide()})},show:function(){if(wallet.container.is(":hidden")&&$.cookie("wallet_balance")>0){wallet.container.slideDown(200),void 0!==ga&&!1!==wallet.pageType&&ga("send","event","Wallet Credit","Popup shown",wallet.pageType);var e=$(document).height();return $("#content").append("<div id='overlay'></div>"),$("#overlay").height(e).addClass("js-custom-popup-focus"),!0}return!1},hide:function(){return!!wallet.container.is(":visible")&&(wallet.container.slideUp(100),$("#overlay").remove(),!0)},setCookie:function(){var e=new Date;e.setTime(e.getTime()+6048e5);var t=$.cookie(wallet.cookieName);$.cookie(wallet.cookieName,t,{expires:e,path:"/"})}},Zalora=Zalora||{};Zalora={ERROR_IMAGE_BEACON_PATH:"http://costa.graphite.zalora.com/images/local_redesign/beacons/error.gif",PIXEL_IMAGE_BEACON_PATH:"http://pixel.graphite.zalora.com/pixel.gif",queueTimeOut:{},queue:{},init:function(){void 0!==miniCart&&miniCart.initialize(),void 0!==wallet&&wallet.initialize(),void 0!==newsletter&&newsletter.init(),void 0!==Navigation&&Navigation.init(),"undefined"!=typeof Search&&Search.init(window.store),void 0!==cmsInspector&&cmsInspector.initialize(),void 0!==messagePopup&&messagePopup.initialize(),this.rectifyNamedAnchors()},preload:function(e){var t=document.createElement("object"),i=document.body;t.height=0,t.data=e,i.appendChild(t)},previousHash:"",rectifyNamedAnchors:function(){var e=this,t=$(window),i=function(){var t=$(window),i=t.data("mustRectifyNamedAnchors"),n=window.location.hash;if(n!=e.previousHash||i){i&&t.data("mustRectifyNamedAnchors",!1);var o,a,s,r=$(".js-midNav"),l=$(n);e.previousHash=n,a=r.height(),o=l.offset(),o&&(s=o.top-a,t.scrollTop(s))}};t.on("scroll",i),$('a[href*="#"]').click(function(){$(window).data("mustRectifyNamedAnchors",!0)})},sendEvent:function(e,t){var i="";window.store.catalogsorting_tracking&&(this.pushToQueue(e,t),i=window.setTimeout(function(){Zalora.pushQueue(e),Zalora.resetQueue(e)},100),this.registerAction(e,i))},pushToQueue:function(e,t){this.getQueue(e).push(t)},getQueue:function(e){return void 0===this.queue[e]&&(this.queue[e]=[]),this.queue[e]},registerAction:function(e,t){void 0!==this.queueTimeOut[e]&&window.clearTimeout(this.queueTimeOut[e]),this.queueTimeOut[e]=t},pushQueue:function(e){var t=this.getQueue(e),i=t.join(","),n=this.PIXEL_IMAGE_BEACON_PATH,o="";window.store.pixel_beacon_path&&(n=window.store.pixel_beacon_path),window.store.pixel_ns&&(o=window.store.pixel_ns);var a=(new Date).getTime(),s=n+"?t="+a+"&action="+e;s+="&sku="+i,s+="&ns="+o,(new Image).src=s},resetQueue:function(e){this.queue[e]=[],window.clearTimeout(this.queueTimeOut[e])}};function isString(e){return"string"==typeof e}if($(document).ready(function(){Zalora.init()}),void 0===window.Raven){var Raven={};Raven.captureException=function(e,t){console.log(e,t)},Raven.captureMessage=function(e){console.log("ERROR: "+e)}}else"function"==typeof Raven.initGlobalJQueryAjaxErrorHandler&&Raven.initGlobalJQueryAjaxErrorHandler();var messagePopup={popup:$("#message-popup"),popupContent:$("#message-popup-content"),popupMessage:$("#message-popup .js-message"),popupMessageCloseButton:$("#message-popup .close-button"),popupMessageButton:$("#message-popup .js-popup-button"),initialize:function(e,t){this.popupContent.length&&this.showMessagePopup(this.popupContent.html(),this.popupContent.data("button-name")),this.popupMessageCloseButton.off("click"),this.popupMessageCloseButton.on("click",function(){messagePopup.closeMessagePopup()}),this.popupMessageButton.off("click"),this.popupMessageButton.on("click",function(){messagePopup.closeMessagePopup()})},showMessagePopup:function(e,t){this.popupMessage.html(e),this.popupMessageButton.html(t),this.popup.show()},closeMessagePopup:function(){this.popup.hide()}},Zalora=Zalora||{};Zalora.utils={collectionHas:function(e,t){for(var i=0,n=e.length;i<n;i++)if(e[i]==t)return!0;return!1},turnOffInputAutomatorByDefault:function(){for(var e=document.getElementsByTagName("form"),t=["autocapitalize","autocorrect"],i=0;i<e.length;i++)for(var n=0;n<t.length;n++)"on"!==e[i].getAttribute(t[n])&&e[i].setAttribute(t[n],"off")}},window.log=function(){if(log.history=log.history||[],log.history.push(arguments),this.console){arguments.callee=arguments.callee.caller;var e=[].slice.call(arguments);"object"==typeof console.log?log.apply.call(console.log,console,e):console.log.apply(console,e)}},function(e){function t(){}for(var i,n="assert,count,debug,dir,dirxml,error,exception,group,groupCollapsed,groupEnd,info,log,timeStamp,profile,profileEnd,time,timeEnd,trace,warn".split(",");i=n.pop();)e[i]=e[i]||t}(function(){try{return console.log(),window.console}catch(e){return window.console={}}}()),function(e,t,i,n){e.fn.sonar=function(t,i){return"boolean"==typeof t&&(i=t,t=n),e.sonar(this[0],t,i)};var o,a=i.body,s=e(t),r=function(e,o,s){if(e){a||(a=i.body);var r=e,l=0,c=a.offsetHeight,u=t.innerHeight||i.documentElement.clientHeight||a.clientHeight||0,h=i.documentElement.scrollTop||t.pageYOffset||a.scrollTop||0,d=e.offsetHeight||0;if(!e.sonarElemTop||e.sonarBodyHeight!==c){if(r.offsetParent)do{l+=r.offsetTop}while(r=r.offsetParent);e.sonarElemTop=l,e.sonarBodyHeight=c}return o=o===n?0:o,!(e.sonarElemTop+(s?0:d)<h-o||e.sonarElemTop+(s?d:0)>h+u+o)}},l={},c=0,u=function(){o&&clearTimeout(o),o=setTimeout(function(){var t,i,n,o,a,s,c;for(n in l)for(i=l[n],s=0,c=i.length;s<c;s++)o=i[s],t=o.elem,a=r(t,o.px,o.full),("scrollout"===n?!a:a)?o.tr||(t["_"+n]?(e(t).trigger(n),o.tr=1):(i.splice(s,1),s--,c--)):o.tr=0},0)},h=function(t,i){var n=i.px,o=i.full,a=i.evt,h=r(t,n,o),d=0;t["_"+a]=1,("scrollout"===a?!h:h)&&(setTimeout(function(){e(t).trigger("scrollout"===a?"scrollout":"scrollin")},0),d=1),l[a].push({elem:t,px:n,full:o,tr:d}),c||(s.bind("scroll",u),c=1)};e.sonar=r,l.scrollin=[],e.event.special.scrollin={add:function(e){e=e.data||{},this.scrollin||h(this,{px:e.distance,full:e.full,evt:"scrollin"})},remove:function(){this._scrollin=0}},l.scrollout=[],e.event.special.scrollout={add:function(e){e=e.data||{},this.scrollout||h(this,{px:e.distance,full:e.full,evt:"scrollout"})},remove:function(){this._scrollout=0}}}(jQuery,window,document);var Navigation={menu:null,submenu:null,startScrollPos:0,lastScroll:0,floatingMenu:function(){$(".js-floatMenu").length>0&&$(".js-floatMenu").height()>10?$(".js-midNav").css("height","114px"):$(".js-midNav").css("height","85px"),$(window).scroll(function(){if($(".js-floatWrapper").length>0){var e=$(window).scrollTop();e>Navigation.startScrollPos?($(".js-floatWrapper").addClass("js-navFix"),$(".js-bottomHeader").css("margin-top",$(".js-floatWrapper").height()),e>self.lastScroll?$(".js-topLinks").addClass("display-none"):$(".js-topLinks").removeClass("display-none")):($(".js-floatWrapper").removeClass("js-navFix"),$(".js-bottomHeader").css("margin-top","")),self.lastScroll=e}})},showMenu:function(e){var t=this;$("#sub-"+e).data("shouldShow",!0),setTimeout(function(){$("#sub-"+e).data("shouldShow")&&t.showSubMenu(e)},100)},showSubMenu:function(e){this.lazyLoadThumbnails(e),$("#menu_category_"+e).addClass("hover"),$("#sub-"+e).fadeIn()},hideMenu:function(e){this.delayHideSubMenu(e)},hideSubMenu:function(e){$("#menu_category_"+e).removeClass("hover"),$("#sub-"+e).fadeOut()},delayHideSubMenu:function(e){var t=this;$("#sub-"+e).data("shouldShow",!1),setTimeout(function(){$("#sub-"+e).data("shouldShow")||t.hideSubMenu(e)},100)},showData:function(e){$("#sub-"+e).data("shouldShow",!0)},lazyLoadThumbnails:function(e){$("#sub-"+e+" .lazyNavigation").each(function(){var e,t,i,n;$(this).hasClass(".loaded")||(n=$(this).attr("src"),"catalog-thumbnail"===$(this).attr("type")?i='<img src="'+n+'" width="28" height="28" class="subnavigation-icon" onload="Navigation.showImage($(this));" style="display:none" />':"brand-thumbnail"===$(this).attr("type")?(imageTitle=$(this).attr("title"),i='<img width="77" src="'+n+'" title="'+imageTitle+'" onload="Navigation.showImage($(this));" style="display:none" />'):i='<img src="'+n+'" onload="Navigation.showImage($(this));" style="display:none" />',e=$(this).parent(),e.children("span").remove(),t=e.html(),e.html(i+t))})},showImage:function(e){e.fadeIn()},setNavigationLayerLength:function(){var e=$(".nav-layerSpec");e.each(function(e){var t=$(this),i=t.find(".box"),n=i.length;n=i.length>2?n:2,t.css("width",175*n+"px"),i.each(function(e){$(this).attr("class","box unit size1of"+n)})})},init:function(){this.setGenderCookies(),this.floatingMenu(),this.setNavigationLayerLength(),this.switchLanguage(),this.initTooltip()},setGenderCookies:function(){var e=window.location.pathname;$(".logo, .zalora-logo").click(function(){$.cookie("userGender","",{expires:i,path:"/",secure:!0})});var t="";e.toLowerCase().indexOf("/women/")>=0?t="women":e.toLowerCase().indexOf("/men/")>=0?t="men":e.toLowerCase().indexOf("/kids/")>=0&&(t="kids");var i=new Date;i.setMonth(i.getMonth()+3),""!=t&&$.cookie("userGender",t,{expires:i,path:"/",secure:!0})},switchLanguage:function(){try{var e=$.cookie("userLanguage")}catch(t){var e=""}void 0!==e&&$("#langSwitch li a").each(function(){var t,i,n=$(this).attr("href");if(n&&(t=n.trim().match(/(setLang=([a-z]{2}))($|&)/)[2]),t){var o=window.location.origin;for(key in window.store.languageDomainUrls)if(key==t){o=window.store.languageDomainUrls[key];break}i=o+window.location.pathname+window.location.search.replace(new RegExp("(\\?|&)setLang="+e.toLowerCase()),""),$(this).attr("href",i+(i.indexOf("?")>0?"&":"?")+"setLang="+t),t!==e.toLowerCase()&&($(this).children("img["+t+"=on]").css({display:"none"}),$(this).children("img["+t+"=off]").css({display:"inline"}).attr("alt",document.title)),t===e.toLowerCase()&&($(this).children("img["+t+"=on]").css({display:"inline"}).attr("alt",document.title),$(this).children("img["+t+"=off]").css({display:"none"}),$(this).removeAttr("href"))}})},initTooltip:function(){$(".js-tooltip-header").poshytip({className:"tooltip-shop",showTimeout:1,alignTo:"target",alignX:"inner-left",alignY:"bottom",slideOffset:5,offsetY:0,offsetX:0,allowTipHover:!1})}},floatingPop={init:function(){this.sync()},isScrolledIntoView:function(e){if(void 0===e||e.length<=0)return!0;var t=$(window).scrollTop(),i=t+$(window).height(),n=$(e).offset().top;return n+$(e).outerHeight()<=i&&n>=t},sync:function(){var e=this,t="js-sidebarBlock";$(document).on("touchstart click",function(e){var i=$(e.target);!i.hasClass(t)&&!i.hasClass("js-nav-hd")&&!i.hasClass("js-fct")&&i.parents("."+t).length<=0&&($("."+t).removeClass("js-selectedElementBorder").hide(),$(".js-fctList .js-fct").removeClass("js-selectedElementBorder").removeClass("js-selectedBackgroundColor"))}),$(".js-closeFilter").on("click",function(){$("."+t).removeClass("js-selectedElementBorder").hide(),$(".js-fctList .js-fct").removeClass("js-selectedElementBorder").removeClass("js-selectedBackgroundColor")}),$(".js-fctList .js-fct-hd").on("click",function(i){var n,o=$(this).parent(".js-fct"),a=o.find("."+t),s=$(a).is(":visible");if($("."+t).hide("fast"),!s)return $(".js-fctList .js-fct").removeClass("js-selectedElementBorder").removeClass("js-selectedBackgroundColor"),$(a).show(),a.addClass("js-selectedElementBorder"),o.addClass("js-selectedBackgroundColor"),o.addClass("js-selectedElementBorder"),s=e.isScrolledIntoView(a),s||(n="-"+(a.outerHeight()-32)+"px",a.css("top",n)),!1}),$("."+t).hover(function(){e.isHover=!0}),$(".js-nav-hd").hover(function(i){e.isHover=!0;var n=$(this).parents(".js-nav"),o=n.find("."+t);$(o).fadeIn(300)},function(i){$(i.target);e.isHover=!1,setTimeout(function(){e.isHover||$("."+t).fadeOut(100)},500)})}};$(document).ready(function(){floatingPop.init()});var catalogFilters={init:function(){this.sync()},sync:function(){$(".js-fct-filter-list .js-fct-filter-hd").on("click",function(e){var t=$(this).parent(".js-fct-filter"),i=t.find(".js-sidebar-block");return $(i).is(":visible")?($(i).slideUp(200),t.removeClass("js-selectedBackgroundColor")):($(i).slideDown(200),t.addClass("js-selectedBackgroundColor")),!1}),$(".filter-clear-all").on("click",function(e){return e.preventDefault(),catalog.clearAllFilter(),!1})}};$(document).ready(function(){catalogFilters.init()});var store=window.store||{};store=$.extend(store,{optionsStore:{},stockStore:{},priceStore:{},csrfTokenName:"YII_CSRF_TOKEN",placeHolderPath:void 0,catalog:{image_height:0,image_width:0,image_count_sprite:0,thumb_height:0,thumb_width:0}}),helper={csrf:{getToken:function(){var e=this.getTokenName();return void 0!==$("[name="+e+"]").length?$("[name="+e+"]").val():!!$("#"+e).length&&$("#"+e).val()},getTokenName:function(){return window.store.csrfTokenName},getTokenParamString:function(){return this.getTokenName()+"="+this.getToken()}},isTouchDevice:function(){return"ontouchstart"in window||navigator.msMaxTouchPoints},redirectToCart:function(){document.location.href="/cart"},fadeInOutElement:function(e,t,i){var n=!1,o=8;function a(){o>0?(s=setTimeout(a,100),o--,n?t.fadeOut():t.fadeIn(),n=!n):clearTimeout(s)}var s=setTimeout(a,100);i()},isCartPage:function(){return $('#LeadtimeUserLocationForm_leadtime_context[value="cart"]').length>0}},$(function(){({init:function(){$("input[placeholder]").focus(function(e){$(this).attr("tmpplaceholder",$(this).attr("placeholder")),$(this).removeAttr("placeholder"),$(this).removeClass("placeholder"),$(this).css({"font-style":"normal",color:"#404040"})}),$("input[placeholder]").focusout(function(e){$(this).attr("placeholder",$(this).attr("tmpplaceholder")),$(this).val()||$(this).css({"font-style":"italic",color:"#404040"})})}}).init();(function(){return navigator.userAgent.indexOf("MSIE 10.0")})()&&$("html").addClass("ie10"),helper.isTouchDevice()?$(".nav-sub>li>a").click(function(e){$(this).next(".nav-layer").length&&!$(this).data("visited")&&($(".nav-sub>li>a").removeData("visited"),$(this).data("visited","true"),e.preventDefault())}):$("body").addClass("no-touch"),$("a.anchor-no-jump").click(function(e){e.preventDefault()}),Zalora.utils.turnOffInputAutomatorByDefault()}),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function(e){function t(e){return e}function i(e){return decodeURIComponent(e.replace(o," "))}function n(e){0===e.indexOf('"')&&(e=e.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return a.json?JSON.parse(e):e}catch(e){}}var o=/\+/g,a=e.cookie=function(o,s,r){if(void 0!==s){if(r=e.extend({},a.defaults,r),"number"==typeof r.expires){var l=r.expires,c=r.expires=new Date;c.setDate(c.getDate()+l)}return s=a.json?JSON.stringify(s):String(s),document.cookie=[a.raw?o:encodeURIComponent(o),"=",a.raw?s:encodeURIComponent(s),r.expires?"; expires="+r.expires.toUTCString():"",r.path?"; path="+r.path:"",r.domain?"; domain="+r.domain:"",r.secure?"; secure":""].join("")}s=a.raw?t:i,r=document.cookie.split("; ");for(var l=o?void 0:{},c=0,u=r.length;c<u;c++){var h=r[c].split("="),d=s(h.shift()),h=s(h.join("="));if(o&&o===d){l=n(h);break}o||(l[d]=n(h))}return l};a.defaults={},e.removeCookie=function(t,i){return void 0!==e.cookie(t)&&(e.cookie(t,"",e.extend({},i,{expires:-1})),!0)}}),function(e,t){"use strict";var i=function(e,t){this.init("lazyload",e,t)};i.prototype={constructor:i,init:function(t,i,n){this.type=t,this.$element=e(i),this.options=this.getOptions(n),this.load()},getOptions:function(t){return t=e.extend({},e.fn[this.type].defaults,this.$element.data(),t)},load:function(){this.options.url?this.$element.attr("src",this.options.url):this.options.bg?this.$element.css("background-image",'url("'+this.options.bg+'")'):this.options.class&&!this.$element.hasClass(this.options.class)?this.$element.addClass(this.options.class):void 0!==t.store&&"live"!=t.store.env&&void 0!==t.console&&void 0!==t.console.warn&&t.console.warn('A lazyload element must have a "data-url" or "data-bg" or "data-class" non-empty attribute!')}};var n=e.fn.lazyload;e.fn.lazyload=function(t){return this.each(function(){var n=e(this),o=n.data("lazyload"),a="object"==typeof t&&t;o||n.data("lazyload",o=new i(this,a))})},e.fn.lazyload.Constructor=i,e.fn.lazyload.defaults={url:""},e.fn.lazyload.noConflict=function(){return e.fn.lazyload=n,this},e(t).on("load",function(){e('[data-load="lazy"]').each(function(){var t=e(this),i=t.data();t.lazyload(i)})})}(window.jQuery,window),$(document).ready(function(){$("ul.seo-keywords-list-header li a").click(function(){var e=$(this).html().trim();void 0!==ga&&""!=e&&ga("send","event","Keyword clicks","header keywords",e)}),$("ul.seo-keywords-list-footer li a").click(function(){var e=$(this).html().trim();void 0!==ga&&""!=e&&ga("send","event","Keyword clicks","footer keywords",e)})}),function(e){"use strict";var t=function(t,i){this.options=i,this.$element=e(t),this.$backdrop=this.isShown=null,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,e.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};t.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},t.prototype.toggle=function(e){return this[this.isShown?"hide":"show"](e)},t.prototype.show=function(t){var i=this,n=e.Event("show.bs.modal",{relatedTarget:t});this.$element.trigger(n),this.isShown||n.isDefaultPrevented()||(this.isShown=!0,this.escape(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',e.proxy(this.hide,this)),this.backdrop(function(){var n=e.support.transition&&i.$element.hasClass("fade");i.$element.parent().length||i.$element.appendTo(document.body),i.$element.show().scrollTop(0),n&&i.$element[0].offsetWidth,i.$element.addClass("in").attr("aria-hidden",!1),i.enforceFocus();var o=e.Event("shown.bs.modal",{relatedTarget:t});n?i.$element.find(".modal-dialog").one(e.support.transition.end,function(){i.$element.trigger("focus").trigger(o)}).emulateTransitionEnd(300):i.$element.trigger("focus").trigger(o)}))},t.prototype.hide=function(t){t&&t.preventDefault(),t=e.Event("hide.bs.modal"),this.$element.trigger(t),this.isShown&&!t.isDefaultPrevented()&&(this.isShown=!1,this.escape(),e(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal"),e.support.transition&&this.$element.hasClass("fade")?this.$element.one(e.support.transition.end,e.proxy(this.hideModal,this)).emulateTransitionEnd(300):this.hideModal())},t.prototype.enforceFocus=function(){e(document).off("focusin.bs.modal").on("focusin.bs.modal",e.proxy(function(e){this.$element[0]===e.target||this.$element.has(e.target).length||this.$element.trigger("focus")},this))},t.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.bs.modal",e.proxy(function(e){27==e.which&&this.hide()},this)):this.isShown||this.$element.off("keyup.dismiss.bs.modal")},t.prototype.hideModal=function(){var e=this;this.$element.hide(),this.backdrop(function(){e.removeBackdrop(),e.$element.trigger("hidden.bs.modal")})},t.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},t.prototype.backdrop=function(t){var i=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var n=e.support.transition&&i;if(this.$backdrop=e('<div class="modal-backdrop '+i+'" />').appendTo(document.body),this.$element.on("click.dismiss.bs.modal",e.proxy(function(e){e.target===e.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this)),n&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!t)return;n?this.$backdrop.one(e.support.transition.end,t).emulateTransitionEnd(150):t()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(e.support.transition.end,t).emulateTransitionEnd(150):t()):t&&t()};var i=e.fn.modal;e.fn.modal=function(i,n){return this.each(function(){var o=e(this),a=o.data("bs.modal"),s=e.extend({},t.DEFAULTS,o.data(),"object"==typeof i&&i);a||o.data("bs.modal",a=new t(this,s)),"string"==typeof i?a[i](n):s.show&&a.show(n)})},e.fn.modal.Constructor=t,e.fn.modal.noConflict=function(){return e.fn.modal=i,this},e(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(t){var i=e(this),n=i.attr("href"),o=e(i.attr("data-target")||n&&n.replace(/.*(?=#[^\s]+$)/,"")),a=o.data("bs.modal")?"toggle":e.extend({remote:!/#/.test(n)&&n},o.data(),i.data());i.is("a")&&t.preventDefault(),o.modal(a,this).one("hide",function(){i.is(":visible")&&i.trigger("focus")})}),e(document).on("show.bs.modal",".modal",function(){e(document.body).addClass("modal-open")}).on("hidden.bs.modal",".modal",function(){e(document.body).removeClass("modal-open")})}(jQuery),jQuery(function(){$("#boxTrackOrder .orderTrackerForm").on("submit",function(e){e.preventDefault(),$("#orderAjaxMessage").hide();var t=$(this);t.data("in-progress")||$.ajax({data:t.serialize(),url:t.attr("action")?t.attr("action"):window.location,type:t.attr("method")?t.attr("method"):"post",dataType:"json",cache:!1,beforeSend:function(){return t.data("in-progress",!0),!0},success:function(e){1==e.OmsSuccessResponse&&"undefined"!=e.result?($("#boxTrackOrder").modal("hide"),$("#boxResultTrackOrder").html(e.result),$("#boxResultTrackOrder").modal("show")):($("#orderAjaxMessage").html(e.message),$("#orderAjaxMessage").show()),t.data("in-progress",!1),t.data("invoker",!1)},completed:function(){t.data("in-progress",!1),t.data("invoker",!1)}})}),$(".modal").on("show.bs.modal",function(){$(this).css("display","block");var e=$(this).find(".modal-dialog"),t=($(window).height()-e.height())/2;e.css("margin-top",t)}),$(".tracking-page__container #buttonViewOrderStatus").on("click",function(e){e.preventDefault();var t="/ordertracker/"+$(".tracking-page__container #trackOrder_emailAddress").val()+"/"+$(".tracking-page__container #trackOrder_orderId").val();window.location=t}),$(".linkOrderAndTracking").click(function(){Zalora.Tracking.sendEvent("Order & Tracking","Customer Order Page","Page_Type",1)}),$("#buttonCancelItem").click(function(){var e=$(this).attr("data");Zalora.Tracking.sendEvent("Order & Tracking","Cancel Items",e,1)}),$("#buttonCancelSelectedItems").click(function(){Zalora.Tracking.sendEvent("Order & Tracking","Cancel Selected Items","",1)}),$("#buttonPrintInvoice").click(function(){var e=$(this).attr("data");Zalora.Tracking.sendEvent("Order & Tracking","Print Invoice",e,1)})});var newsletter={sliderCookie:"nl_slider",slideInDelay:1e4,slideOutDelay:3e4,popupSubscription:null,TRACK_VALUES:{nl_header_notification:"Header",nl_footer_notification:"Footer",nl_slider_notification:"Slider",nl_landing:"newsletter_landing",nl_404page_notification:"404Page"},init:function(){this.disableEnterKeyForTextBox(),void 0!==window.store.popupSubscription&&(this.popupSubscription=window.store.popupSubscription,this.initLinks(),this.showPopUp()),this.setCustomValidityMessage(),this.trackAbandonedCmsNewsletterForms(),this.sync()},trackAbandonedCmsNewsletterForms:function(){$(".cms-email-add").each(function(e,t){Zalora.AbandonedFormTracking.watchField(t),$(t).closest("form").find("button[type=submit]").click(function(){Zalora.AbandonedFormTracking.unWatchField(t)})})},initLinks:function(){$(".js-nl_signup").on("click",function(){newsletter.showNewsletter("default")}),$(".js-nl_close").on("click",function(){newsletter.showNewsletter("collapsed"),$(".js-stickyNewsletter__formNoti").hide(),$("#js-subscribe_success").hide(),$("#js-already_subscribed").hide(),$("#js-invalid_email").hide(),$(".pas",".js-stickyNewsletter__formNoti").html("")}),$("#newsletter-submit-women").on("click",function(){$("#newsletter-gender").val("female"),$("#newsletter-submit-btn").trigger("click")}),$("#newsletter-submit-men").on("click",function(){$("#newsletter-gender").val("male"),$("#newsletter-submit-btn").trigger("click")})},disableEnterKeyForTextBox:function(){var e=function(e){13==e.keyCode&&(e.preventDefault(),e.stopPropagation())},t=".js-disableEnterKeyForTextBox";$(t).on("keydown",e),$(t).on("keyup",e)},sync:function(){$(".newsletter-signup").each(function(e,t){Zalora.AbandonedFormTracking.watchField($(t).find("input[type=email]")[0])});var e=this;$(".newsletter-signup button").on("click",function(){$(this).parents("form:first").data("invoker",$(this))}),$(".newsletter-signup").on("submit",function(t){t.preventDefault(),$(this).data("in-progress")||e.submitForm($(this))})},showNewsletter:function(e){try{var t=$.cookie("subscribed_to_nl")}catch(e){var t=""}t>""?($(".js-stickyNewsletter__form").hide(),$(".js-stickyLink").hide()):"collapsed"==e?($(".js-stickyNewsletter__form").hide(),$(".js-stickyLink").show(),newsletter.setSliderCookie("collapsed")):($(".js-stickyLink").hide(),$(".js-stickyNewsletter__form").show(),newsletter.setSliderCookie("default"))},showPopUp:function(){this.popupSubscription;newsletterLink=window.store.newsletter_link;try{var e=$.cookie(this.sliderCookie)}catch(t){var e=""}navigator.cookieEnabled&&"default"!==e&&"collapsed"!==e?($(".js-nl_slide").delay(this.slideInDelay).slideDown(1200,function(){newsletter.setSliderCookie("default")}),this.displayPopUp()):$(".js-nl_slide").show(),this.showNewsletter(e)},displayPopUp:function(){var e=this.popupSubscription;$(".b-stickyNewsletter__offer .js-nl_close").on("click",function(){newsletter.showNewsletter("collapsed"),$.cookie(e.cookie.name,e.cookie.value,{expires:e.cookie.expire,path:"/"})})},setCustomValidityMessage:function(){var e=window.store.nlSignupCustomMessage,t=document.getElementById("newsletterSignUpInput");null!==t&&(t.oninvalid=function(t){t.target.setCustomValidity(""),t.target.validity.valid||t.target.setCustomValidity(e)},t.oninput=function(e){e.target.setCustomValidity("")})},submitForm:function(e){var t=e.serialize(),i=this,n=this.TRACK_VALUES[e.attr("position")];t+="&"+encodeURIComponent("newsletter[where]")+"="+n,t+="&"+encodeURIComponent("newsletter[page]")+"="+encodeURIComponent($(document).attr("title")),e.data("invoker")&&(t+="&"+e.data("invoker").attr("name")+"="+e.data("invoker").val()),Zalora.AbandonedFormTracking.unWatchField(e.find("input[type=email]")[0]),$.ajax({data:t,url:e.attr("action")?e.attr("action"):window.location,type:e.attr("method")?e.attr("method"):"post",dataType:"json",cache:!1,beforeSend:function(){return e.data("in-progress",!0),!0},success:function(t){var o="#"+e.attr("position"),a=$(o);"success"==t.result?(i.webTracking(n,t),i.subscriptionCookie(),a.addClass("s-success").removeClass("s-error"),void 0!==ga&&""!==n&&(void 0!==window.store.isMarketPlace&&1==window.store.isMarketPlace?ga("send","event","Marketplace Newsletter","Signup",n):ga("send","event","Newsletter","Signup",n)),"undefined"!=typeof dataLayer&&dataLayer.push({event:"NLSubscription"}),"undefined"!=typeof utag&&utag.link({event_name:"NLSubscription"}),$("#js-subscribe_success").show(),$(".js-nl_slide").delay(i.slideOutDelay).slideUp(1200)):(a.removeClass("s-success").addClass("s-error"),console.log(t),"invalid_email"===t.messageDetail?$("#js-invalid_email").show():"already_subscribed"===t.messageDetail&&$("#js-already_subscribed").show()),$(".pas",o).html(t.message),a.show(),$(".b-stickyNewsletter__form").hide(),e.data("in-progress",!1),e.data("invoker",!1)},completed:function(){e.data("in-progress",!1),e.data("invoker",!1)}})},webTracking:function(e,t){"function"==typeof track_kdukvh&&track_kdukvh()},subscriptionCookie:function(){var e,t=new Date;t.setTime(t.getTime()+31536e6),e=document.domain.split("."),"www"!==e[0]&&2!==e[0].length||e.shift(),document.cookie=["subscribed_to_nl=2;expires="+t.toGMTString()+";domain="+e.join(".")+";path=/"]},setSliderCookie:function(e){var t=new Date;t.setTime(t.getTime()+31536e6),$.cookie(this.sliderCookie,e,{expires:t,path:"/",secure:!0})}};!function(e){var t=[],i=/^url\(["']?([^"'\)]*)["']?\);?$/i,n=/\.png$/i,o=!!window.createPopup&&"undefined"==document.documentElement.currentStyle.minWidth;function a(){e.each(t,function(){this.refresh(!0)})}e(window).resize(a),e.Poshytip=function(t,i){this.$elm=e(t),this.opts=e.extend({},e.fn.poshytip.defaults,i),this.$tip=e(['<div class="',this.opts.className,'">','<div class="tip-inner tip-bg-image"></div>','<div class="tip-arrow tip-arrow-top tip-arrow-right tip-arrow-bottom tip-arrow-left"></div>',"</div>"].join("")).appendTo(document.body),this.$arrow=this.$tip.find("div.tip-arrow"),this.$inner=this.$tip.find("div.tip-inner"),this.disabled=!1,this.content=null,this.init()},e.Poshytip.prototype={init:function(){t.push(this);var i=this.$elm.attr("title");if(this.$elm.data("title.poshytip",void 0!==i?i:null).data("poshytip",this),"none"!=this.opts.showOn)switch(this.$elm.bind({"mouseenter.poshytip":e.proxy(this.mouseenter,this),"mouseleave.poshytip":e.proxy(this.mouseleave,this)}),this.opts.showOn){case"hover":"cursor"==this.opts.alignTo&&this.$elm.bind("mousemove.poshytip",e.proxy(this.mousemove,this)),this.opts.allowTipHover&&this.$tip.hover(e.proxy(this.clearTimeouts,this),e.proxy(this.mouseleave,this));break;case"focus":this.$elm.bind({"focus.poshytip":e.proxy(this.showDelayed,this),"blur.poshytip":e.proxy(this.hideDelayed,this)})}},mouseenter:function(e){return!!this.disabled||(this.$elm.attr("title",""),"focus"==this.opts.showOn||void this.showDelayed())},mouseleave:function(e){if(this.disabled||this.asyncAnimating&&(this.$tip[0]===e.relatedTarget||jQuery.contains(this.$tip[0],e.relatedTarget)))return!0;if(!this.$tip.data("active")){var t=this.$elm.data("title.poshytip");null!==t&&this.$elm.attr("title",t)}if("focus"==this.opts.showOn)return!0;this.hideDelayed()},mousemove:function(e){if(this.disabled)return!0;this.eventX=e.pageX,this.eventY=e.pageY,this.opts.followCursor&&this.$tip.data("active")&&(this.calcPos(),this.$tip.css({left:this.pos.l,top:this.pos.t}),this.pos.arrow&&(this.$arrow[0].className="tip-arrow tip-arrow-"+this.pos.arrow))},show:function(){this.disabled||this.$tip.data("active")||(this.reset(),this.update(),this.content&&(this.display(),this.opts.timeOnScreen&&this.hideDelayed(this.opts.timeOnScreen)))},showDelayed:function(t){this.clearTimeouts(),this.showTimeout=setTimeout(e.proxy(this.show,this),"number"==typeof t?t:this.opts.showTimeout)},hide:function(){!this.disabled&&this.$tip.data("active")&&this.display(!0)},hideDelayed:function(t){this.clearTimeouts(),this.hideTimeout=setTimeout(e.proxy(this.hide,this),"number"==typeof t?t:this.opts.hideTimeout)},reset:function(){this.$tip.queue([]).detach().css("visibility","hidden").data("active",!1),this.$inner.find("*").poshytip("hide"),this.opts.fade&&this.$tip.css("opacity",this.opacity),this.$arrow[0].className="tip-arrow tip-arrow-top tip-arrow-right tip-arrow-bottom tip-arrow-left",this.asyncAnimating=!1},update:function(e,t){if(!this.disabled){var i=void 0!==e;if(i){if(t||(this.opts.content=e),!this.$tip.data("active"))return}else e=this.opts.content;var n=this,o="function"==typeof e?e.call(this.$elm[0],function(e){n.update(e)}):"[title]"==e?this.$elm.data("title.poshytip"):e;this.content!==o&&(this.$inner.empty().append(o),this.content=o),this.refresh(i)}},refresh:function(t){if(!this.disabled){if(t){if(!this.$tip.data("active"))return;var a={left:this.$tip.css("left"),top:this.$tip.css("top")}}this.$tip.css({left:0,top:0}).appendTo(document.body),void 0===this.opacity&&(this.opacity=this.$tip.css("opacity"));var s=this.$tip.css("background-image").match(i),r=this.$arrow.css("background-image").match(i);if(s){var l=n.test(s[1])
;o&&l?(this.$tip.css("background-image","none"),this.$inner.css({margin:0,border:0,padding:0}),s=l=!1):this.$tip.prepend('<table class="tip-table" border="0" cellpadding="0" cellspacing="0"><tr><td class="tip-top tip-bg-image" colspan="2"><span></span></td><td class="tip-right tip-bg-image" rowspan="2"><span></span></td></tr><tr><td class="tip-left tip-bg-image" rowspan="2"><span></span></td><td></td></tr><tr><td class="tip-bottom tip-bg-image" colspan="2"><span></span></td></tr></table>').css({border:0,padding:0,"background-image":"none","background-color":"transparent"}).find(".tip-bg-image").css("background-image",'url("'+s[1]+'")').end().find("td").eq(3).append(this.$inner),l&&!e.support.opacity&&(this.opts.fade=!1)}r&&!e.support.opacity&&(o&&n.test(r[1])&&(r=!1,this.$arrow.css("background-image","none")),this.opts.fade=!1);var c=this.$tip.find("> table.tip-table");if(o){this.$tip[0].style.width="",c.width("auto").find("td").eq(3).width("auto");var u=this.$tip.width(),h=parseInt(this.$tip.css("min-width")),d=parseInt(this.$tip.css("max-width"));!isNaN(h)&&u<h?u=h:!isNaN(d)&&u>d&&(u=d),this.$tip.add(c).width(u).eq(0).find("td").eq(3).width("100%")}else c[0]&&c.width("auto").find("td").eq(3).width("auto").end().end().width(document.defaultView&&document.defaultView.getComputedStyle&&parseFloat(document.defaultView.getComputedStyle(this.$tip[0],null).width)||this.$tip.width()).find("td").eq(3).width("100%");if(this.tipOuterW=this.$tip.outerWidth(),this.tipOuterH=this.$tip.outerHeight(),this.calcPos(),r&&this.pos.arrow&&(this.$arrow[0].className="tip-arrow tip-arrow-"+this.pos.arrow,this.$arrow.css("visibility","inherit")),t&&this.opts.refreshAniDuration){this.asyncAnimating=!0;var p=this;this.$tip.css(a).animate({left:this.pos.l,top:this.pos.t},this.opts.refreshAniDuration,function(){p.asyncAnimating=!1})}else this.$tip.css({left:this.pos.l,top:this.pos.t})}},display:function(t){var i=this.$tip.data("active");if(!(i&&!t||!i&&t)){if(this.$tip.stop(),(this.opts.slide&&this.pos.arrow||this.opts.fade)&&(t&&this.opts.hideAniDuration||!t&&this.opts.showAniDuration)){var n={},o={};if(this.opts.slide&&this.pos.arrow){var a;"bottom"==this.pos.arrow||"top"==this.pos.arrow?(a="top","bottom"):(a="left","right");var s=parseInt(this.$tip.css(a));n[a]=s+(t?0:(this.pos.arrow,-this.opts.slideOffset)),o[a]=s+(t?(this.pos.arrow,-this.opts.slideOffset):0)+"px"}this.opts.fade&&(n.opacity=t?this.$tip.css("opacity"):0,o.opacity=t?0:this.opacity),this.$tip.css(n).animate(o,this.opts[t?"hideAniDuration":"showAniDuration"])}if(t?this.$tip.queue(e.proxy(this.reset,this)):this.$tip.css("visibility","inherit"),i){var r=this.$elm.data("title.poshytip");null!==r&&this.$elm.attr("title",r)}this.$tip.data("active",!i)}},disable:function(){this.reset(),this.disabled=!0},enable:function(){this.disabled=!1},destroy:function(){this.reset(),this.$tip.remove(),delete this.$tip,this.content=null,this.$elm.unbind(".poshytip").removeData("title.poshytip").removeData("poshytip"),t.splice(e.inArray(this,t),1)},clearTimeouts:function(){this.showTimeout&&(clearTimeout(this.showTimeout),this.showTimeout=0),this.hideTimeout&&(clearTimeout(this.hideTimeout),this.hideTimeout=0)},calcPos:function(){var t,i,n,o,a,s,r={l:0,t:0,arrow:""},l=e(window),c={l:l.scrollLeft(),t:l.scrollTop(),w:l.width(),h:l.height()};if("cursor"==this.opts.alignTo)t=i=n=this.eventX,o=a=s=this.eventY;else{var u=this.$elm.offset(),h={l:u.left,t:u.top,w:this.$elm.outerWidth(),h:this.$elm.outerHeight()};t=h.l+("inner-right"!=this.opts.alignX?0:h.w),i=t+Math.floor(h.w/2),n=t+("inner-left"!=this.opts.alignX?h.w:0),o=h.t+("inner-bottom"!=this.opts.alignY?0:h.h),a=o+Math.floor(h.h/2),s=o+("inner-top"!=this.opts.alignY?h.h:0)}switch(this.opts.alignX){case"right":case"inner-left":r.l=n+this.opts.offsetX,this.opts.keepInViewport&&r.l+this.tipOuterW>c.l+c.w&&(r.l=c.l+c.w-this.tipOuterW),"right"!=this.opts.alignX&&"center"!=this.opts.alignY||(r.arrow="left");break;case"center":r.l=i-Math.floor(this.tipOuterW/2),this.opts.keepInViewport&&(r.l+this.tipOuterW>c.l+c.w?r.l=c.l+c.w-this.tipOuterW:r.l<c.l&&(r.l=c.l));break;default:r.l=t-this.tipOuterW-this.opts.offsetX,this.opts.keepInViewport&&r.l<c.l&&(r.l=c.l),"left"!=this.opts.alignX&&"center"!=this.opts.alignY||(r.arrow="right")}switch(this.opts.alignY){case"bottom":case"inner-top":r.t=s+this.opts.offsetY,r.arrow&&"cursor"!=this.opts.alignTo||(r.arrow="top"),this.opts.keepInViewport&&r.t+this.tipOuterH>c.t+c.h&&(r.t=o-this.tipOuterH-this.opts.offsetY,"top"==r.arrow&&(r.arrow="bottom"));break;case"center":r.t=a-Math.floor(this.tipOuterH/2),this.opts.keepInViewport&&(r.t+this.tipOuterH>c.t+c.h?r.t=c.t+c.h-this.tipOuterH:r.t<c.t&&(r.t=c.t));break;default:r.t=o-this.tipOuterH-this.opts.offsetY,r.arrow&&"cursor"!=this.opts.alignTo||(r.arrow="bottom"),this.opts.keepInViewport&&r.t<c.t&&(r.t=s+this.opts.offsetY,"bottom"==r.arrow&&(r.arrow="top"))}this.pos=r}},e.fn.poshytip=function(t){if("string"==typeof t){var i=arguments,n=t;return Array.prototype.shift.call(i),"destroy"==n&&(this.die?this.die("mouseenter.poshytip").die("focus.poshytip"):e(document).undelegate(this.selector,"mouseenter.poshytip").undelegate(this.selector,"focus.poshytip")),this.each(function(){var t=e(this).data("poshytip");t&&t[n]&&t[n].apply(t,i)})}var o=e.extend({},e.fn.poshytip.defaults,t);if(e("#poshytip-css-"+o.className)[0]||e(['<style id="poshytip-css-',o.className,'" type="text/css">',"div.",o.className,"{visibility:hidden;position:absolute;top:0;left:0;}","div.",o.className," table.tip-table, div.",o.className," table.tip-table td{margin:0;font-family:inherit;font-size:inherit;font-weight:inherit;font-style:inherit;font-variant:inherit;vertical-align:middle;}","div.",o.className," td.tip-bg-image span{display:block;font:1px/1px sans-serif;height:",o.bgImageFrameSize,"px;width:",o.bgImageFrameSize,"px;overflow:hidden;}","div.",o.className," td.tip-right{background-position:100% 0;}","div.",o.className," td.tip-bottom{background-position:100% 100%;}","div.",o.className," td.tip-left{background-position:0 100%;}","div.",o.className," div.tip-inner{background-position:-",o.bgImageFrameSize,"px -",o.bgImageFrameSize,"px;}","div.",o.className," div.tip-arrow{visibility:hidden;position:absolute;overflow:hidden;font:1px/1px sans-serif;}","</style>"].join("")).appendTo("head"),o.liveEvents&&"none"!=o.showOn){var a,s=e.extend({},o,{liveEvents:!1});switch(o.showOn){case"hover":a=function(){var t=e(this);t.data("poshytip")||t.poshytip(s).poshytip("mouseenter")},this.live?this.live("mouseenter.poshytip",a):e(document).delegate(this.selector,"mouseenter.poshytip",a);break;case"focus":a=function(){var t=e(this);t.data("poshytip")||t.poshytip(s).poshytip("showDelayed")},this.live?this.live("focus.poshytip",a):e(document).delegate(this.selector,"focus.poshytip",a)}return this}return this.each(function(){new e.Poshytip(this,o)})},e.fn.poshytip.defaults={content:"[title]",className:"tip-yellow",bgImageFrameSize:10,showTimeout:500,hideTimeout:100,timeOnScreen:0,showOn:"hover",liveEvents:!1,alignTo:"cursor",alignX:"right",alignY:"top",offsetX:-22,offsetY:18,keepInViewport:!0,allowTipHover:!0,followCursor:!1,fade:!0,slide:!0,slideOffset:8,showAniDuration:300,hideAniDuration:300,refreshAniDuration:200}}(jQuery);var Zalora=Zalora||{},cmsInspector={isFirst:!0,initialize:function(){var e=!1;$(document).keyup(function(t){17==t.which&&(e=!1)}).keydown(function(t){if(17==t.which&&(e=!0),16==t.which&&1==e)return cmsInspector.generateCmsInspectorElements(),!1}),$("#js-show-cms-inspector").click(function(e){e.preventDefault(),cmsInspector.generateCmsInspectorElements()})},generateCmsInspectorElements:function(){var e=$(".js-cmsInspector"),t="";1==cmsInspector.isFirst?(e.addClass("js-cms-inpector-highlight"),e.addClass("js-cms-inpector-highlight-border"),e.each(function(){var e=$(this);t=e.attr("data-cmskey");var i=document.createElement("div");i.setAttribute("class","js-topic"),i.innerHTML=t,e.append(i)})):"none"==$(".js-cmsInspector .js-topic").css("display")?($(".js-cmsInspector .js-topic").css("display","inline"),e.addClass("js-cms-inpector-highlight"),e.addClass("js-cms-inpector-highlight-border")):($(".js-cmsInspector .js-topic").hide(),e.removeClass("js-cms-inpector-highlight-border")),cmsInspector.isFirst=!1}};if(function(){var e=".js-livechat",t=e+"-minimize",i={},n=function(e,t,i){var n={path:"/"};return i&&(n.domain=i),$.cookie(e,t,n)},o=function(){var e="",t=r();return"string"==typeof t.cdn_url&&(e=t.cdn_url),e},a=function(e){return $.cookie(e)},s=function(){return a("chatState")},r=function(){return"object"==typeof Zalora.jsStore?Zalora.jsStore:"object"==typeof window.store?window.store:{}},l=function(e,t){return n("chatState",e,t)},c=function(e){if(!E())return l("opened",e)},u=function(){return"opened"==s()},h=function(e){return l("minimized",e)},d=function(){return"minimized"==s()},p=function(e,t){return n("chatInProgressState",e,t)},f=function(){return a("chatInProgressState")},g=function(e){return p("yes",e)},m=function(e){return p("no",e)},v=function(){return"yes"==f()},w=function(e,t){return n("chatButtonState",e,t)},y=function(){return a("chatButtonState")},b=function(){var t=k(y());$(e+" img").attr("src",t)},_=function(){return window.location.hostname},C=function(){var e=_(),t=e.split(".");return t.length?"string"!=typeof t[t.length-1]?"en":t[t.length-1].toLowerCase():""},S=function(){return a("userLanguage")},k=function(e){var t="en";switch(C()){case"hk":"zh"==S().toLowerCase()&&(t="zh");break;case"vn":t="vi"}var i="expanded_";return"collapsed"==e&&(i="collapsed_"),o()+"/images/local/chat-panel/"+i+t+"-02112015.png"},j=function(e){w("collapsed",e),b()},T=function(){return document.body.className.indexOf("_mobile")>=0},x=function(){return document.body.className.indexOf("_iosapp")>=0},E=function(){return/Android|BlackBerry|IEMobile|iPad|iPod|iPhone|Opera Mini|webOS/i.test(navigator.userAgent)},P=function(){return T()||x()};i.init=function(i){"string"==typeof i&&i||(i=_()),this.domain=i;var n=$("<div/>");n.addClass(t.slice(1)).css("position","absolute").css("top","0").css("right","0").css("z-index","10001").css("width","40px").css("height","30px"),n.click(function(e){e.preventDefault(),"collapsed"!=y()&&(e.stopPropagation(),j(i))});var o=$("<img/>"),a=k(y());o.attr("src",a),o.on("load",function(){b()});var s=$("<a/>");s.addClass(e.slice(1)).css("position","fixed").css("bottom","300px").css("right","0").css("z-index","10000").attr("href","#").append(n,o),s.hide(),$("footer").append(s)},i.click=function(t){var i=$(e);if(!t)return void i.click();i.click(function(e){return e.preventDefault(),t.apply(this,arguments)})},i.show=function(){$(e).show()},i.hide=function(){this.isViewedOnMobileDevice()||$(e).hide()},i.collapse=function(){j(this.domain)},i.setChatWindowOpened=function(){c(this.domain)},i.setChatWindowMinimized=function(){h(this.domain)},i.setChatInProgress=function(){g(this.domain)},i.setChatNotInProgress=function(){m(this.domain)},i.isChatWindowOpened=u,i.isChatWindowMinimized=d,i.isChatInProgress=v,i.setCookie=n,i.getCookie=a,i.getZaloraJsStore=r,i.isMobile=P,i.isIosApp=x,i.isViewedOnMobileDevice=E,i.isWebMobile=T,window.ChatPanel=i}(),function(){var e=window.LiveChat||{},t=function(){var e=window.LC_API;ChatPanel.setChatWindowMinimized(),ChatPanel.show(),e.hide_chat_window()},i=function(){var e=window.LC_API;ChatPanel.collapse(),ChatPanel.setChatWindowOpened(),e.open_chat_window(),ChatPanel.hide()},n=function(){return window.LC_API.agents_are_available()},o=function(){var e=window.LC_API;e.visitor_engaged()||e.hide_chat_window()},a=function(){n()&&(ChatPanel.show(),ChatPanel.isChatWindowOpened()?i():t())},s=function(){window.LC_API.visitor_engaged()||(ChatPanel.hide(),ChatPanel.setChatInProgress())},r=function(){ChatPanel.show(),ChatPanel.setChatNotInProgress()},l=function(e){if("online_for_chat"==e.state||"online_for_queue"==e.state)return void ChatPanel.show();ChatPanel.hide()},c=function(){var e="https:"==document.location.protocol?"https:":"http:",t=document.createElement("script");t.type="text/javascript",t.async=!0,t.src=e+"//cdn.livechatinc.com/tracking.js";var i=document.getElementsByTagName("script")[0];i.parentNode.insertBefore(t,i)};e.init=function(e,n){if(!ChatPanel.isMobile()){var u={};u.license=e,window.__lc=u;var h=h||{};h.on_before_load=o,h.on_chat_window_minimized=t,h.on_chat_window_opened=s,h.on_chat_started=s,h.on_chat_state_changed=l,h.on_chat_ended=r,h.on_after_load=a,window.LC_API=h;window.lc_onload_called=!1,c(),ChatPanel.init(n),ChatPanel.click(function(){i()})}},window.LiveChat=e}(),function(){var e=window.Zopim||{},t=function(){ChatPanel.show(),ChatPanel.isChatWindowMinimized()||n()},i=function(){window.$zopim.livechat.window.hide(),ChatPanel.show()},n=function(){window.$zopim.livechat.window.show(),ChatPanel.hide()},o=function(e){var i=!1;switch(e){case"online":t(),i=!0;break;case"offline":i=!1,ChatPanel.hide()}return i},a=function(){n(),ChatPanel.setChatInProgress()},s=function(){ChatPanel.setChatNotInProgress()},r=function(){ChatPanel.setChatWindowMinimized(),ChatPanel.show()},l=function(){var e=window.$zopim;ChatPanel.isChatInProgress()||(e.livechat.clearAll(),h()),ChatPanel.isViewedOnMobileDevice()?(ChatPanel.setChatInProgress(),ChatPanel.setChatWindowMinimized()):ChatPanel.setChatWindowOpened(),ChatPanel.hide()},c=function(){var e=ChatPanel.getZaloraJsStore(),t=e.customer_name,i=e.customer_email;return t&&i?{name:t,email:i}:null},u=function(e,t){ChatPanel.isMobile()||window.$zopim||function(i,n){var o=this.zopim=function(e){o._.push(e)},a=o.s=i.createElement(n),s=i.getElementsByTagName(n)[0];o.set=function(e){o.set._.push(e)},o._=[],o.set._=[],a.async=!0,a.setAttribute("charset","utf-8"),a.src="//v2.zopim.com/?"+e,o.t=+new Date,a.type="text/javascript",s.parentNode.insertBefore(a,s),a.onload=t}(document,"script")},h=function(){var e=window.$zopim,t=c();t&&t.name&&t.email&&(e.livechat.setName(t.name),e.livechat.setEmail(t.email))},d=function(){ChatPanel.isChatWindowOpened()?(n(),l()):(i(),r())};e.init=function(e,t){var i=function(){var e=window.$zopim;if(!e.livechat.setOnStatus(o))return void e.livechat.hideAll();e.livechat.window.setTitle("ZALORA LIVE CHAT"),e.livechat.window.onHide(r),e.livechat.window.onShow(l),e.livechat.setOnChatStart(a),e.livechat.setOnChatEnd(s),ChatPanel.init(t),ChatPanel.click(function(){n(),l(),ChatPanel.collapse()}),d()};u(e,function(){$(i)})},window.Zopim=e}(),void 0===ga){console.warn("Google Analytics library not loaded. Tracking commands will be printed out for debugging purpose.");var ga=function(){var e=Array.prototype.slice.call(arguments);console.log("Tracking command: "+JSON.stringify(e))}}var Zalora=Zalora||{};Zalora.Tracking={sendEvent:function(e,t,i,n){ga("send","event",e,t,i,n||{nonInteraction:1}),"undefined"!=typeof utag&&utag.link({event_name:e,event_action:t,event_label:i,event_value:n})},sendDataLayerEvent:function(e){"undefined"!=typeof dataLayer&&dataLayer.push({event:e}),"undefined"!=typeof utag&&utag.link({event_name:e})},ecSetAction:function(e,t,i){ga("ec:setAction",e,{step:t,option:i}),"undefined"!=typeof utag&&utag.link({event_name:"ecAction",event_action:e,event_step:t,event_option:i,Product_SKU:utag_data.Product_SKU,Product_Name:utag_data.Product_Name,Product_Category:utag_data.Product_Category,Product_Brand:utag_data.Product_Brand,Product_Price:utag_data.Product_Price,Product_Quantity:utag_data.Product_Quantity})},ecAddProduct:function(e){ga("ec:addProduct",e),"undefined"!=typeof utag&&utag.link({event_name:"ecAddProduct",product:e})},set:function(e,t){ga("set",e,t),"undefined"!=typeof utag&&utag.link({key:t})},sendPageview:function(){ga("send","pageview")},getTrackingAddressType:function(e){switch(e){case"address":return"Home/Office";case"popStationPickup":return"PopStation";case"shipToSevenEleven":return"7/11";default:return e}},getFieldName:function(e){if(void 0!==e){var t=e.split(/[\[\]]/),i=t[0],n=t[1];switch(i){case"CheckEmailForm":return"Sign In "+n;case"RegistrationForm":return"Sign Up "+n;case"AddressForm":return"Delivery address "+n;case"CreditcardForm":return"Payment Credit/Debit "+n;default:return i+" "+n}}}};var Zalora=Zalora||{};Zalora.AbandonedFormTracking=function(){var e=[];function t(){$(window).unload(n),window.addEventListener("pagehide",n,!1)}function i(){return"abandoned_form_tracking_enabled"in Zalora.jsStore&&1===Zalora.jsStore.abandoned_form_tracking_enabled}function n(t){if(i()&&0!==e.length){var n=c();0!==n.data.length&&("function"==typeof t?t(n.data,n.formDataCount):o(n.data,n.formDataCount),l())}}function o(e,t){var i=(new Date).getTime(),n="/ajax/tracking/trackabandonedforms/?trackedForms="+t+"&"+$.param(e)+"&t="+i;(new Image).src=n}function a(t){i()&&(s(t)||e.push($(t)))}function s(t){for(var i=0;i<e.length;i++){if(e[i].get(0)===$(t).get(0))return!0}return!1}function r(t){if(i()){for(var n=[],o=0;o<e.length;o++){var a=e[o];a.get(0)!==$(t).get(0)&&n.push(a)}e=n}}function l(){e=[]}function c(){for(var t=[],i=0,n=0;n<e.length;n++){var o=e[n],a=u(o),s=window.location.pathname,r=$(o).closest("form").attr("position");void 0===r&&(r=""),0!==a.length&&(t.push({name:"emailAddresses_"+i,value:a.join(" ")}),t.push({name:"urlPath_"+i,value:s}),t.push({name:"formPosition_"+i,value:r}),i++)}return{data:t,formDataCount:i}}function u(e){for(var t,i=$(e).val(),n=/([a-z0-9!#$%&'*+\/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+\/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9]))/gi,o=[];null!==(t=n.exec(i));){t.index===n.lastIndex&&n.lastIndex++;var a=t[0];o.push(a)}return o}return{watchField:a,unWatchField:r,unWatchAllFields:l,trackAbandonedForms:n,initialize:function(){t()}}}();var Zalora=Zalora||{};Zalora.Header=Zalora.Header||{},Zalora.Header.HeaderController={category_bar_model:"",dropdown_node:null,init:function(e){this.model=Zalora.Header.HeaderModel,this.model.init(e),this.view=Zalora.Header.HeaderView,Searchv2.init(window.store),this.sync(),helper.isTouchDevice()&&this.syncTablet(),this.setGenderCookies()},sync:function(){$("body").append("<div id='overlay'></div>");var e="mouseover",t="#js-category-dropdown-view-all-";"undefined"==typeof dataLayer||"Tablet"!=dataLayer[0].Device_Type&&"Mobile"!=dataLayer[0].Device_Type||(t+="tablet-",e="click"),$(".js-seg-bar__account").parent().customPopup({shift:"mainRight",contentNode:$(".account-menu__popup"),event:e,width:"200",arrow:"arrow-dark"}),$(".platform_icon_hover").customPopup({shift:"fullWidth",contentNode:$(".shop-select-bar"),topMore:"24",event:"click",callback:function(){$(".b-header__segment-bar-arrow").toggle()}}),$(".js-category-bar-text").each(function(){$(this).customPopup({shift:"fullWidth",contentNode:$("#js-category-bar-dropdown-"+$(this).attr("data-value")),event:e,focus:!0});var i=$(this).find(".js-header__category-dropdown-item").splice(11);i.length>0&&($(t+$(this).attr("data-value")).show(),$(i).each(function(){$(this).hide()}))}),1==$.cookie("sessionCount")&&1==$.cookie("pageCount")?this.initLocalizationBar():$.cookie("showLocalizationNotice")&&($(".js-localization-bar").show(),$(".js-localization-bar-country").hide(),$(".js-localization-bar-language").hide(),$(".js-localization-bar-btn-ok1").hide(),$(".js-localization-bar-notice").show(),$.removeCookie("showLocalizationNotice"),$(".js-localization-bar").delay(3e3).fadeOut(300)),this.initSegment(this.model.current_segment),this.initShopSelect(),this.initCart(this.model.cart_count),this.updateWishlistCount(this.model.wishlist_count)},syncTablet:function(){$(".js-header-dropdown-mobile").on("touchstart click",function(e){$(this).parent().trigger("toggle"),e.preventDefault()})},setGenderCookies:function(){var e=window.location.pathname;$(".ctl-primary-type-link").click(function(){$.cookie("userGender","",{expires:i,path:"/",secure:!0})});var t="";e.toLowerCase().indexOf("/women/")>=0?t="women":e.toLowerCase().indexOf("/men/")>=0&&(t="men");var i=new Date;i.setMonth(i.getMonth()+3),""!=t&&$.cookie("userGender",t,{expires:i,path:"/",secure:!0})},render:function(){this.view.init()},initSegment:function(e){if(!e)return void $(".js-header__category-bar").hide();$(".b-header__segment-bar-arrow").remove();$(".js-header__segment-"+e).append('<svg class="nav-arrow b-header__segment-bar-arrow"><polygon points="10 0 20 10 0 10 "></polygon></svg>')},initShopSelect:function(){var e=this.model.current_page_type.toLowerCase();$(".js-shop-select").each(function(){$(this).removeClass("selected"),$(this).attr("data")==e?$(this).addClass("selected"):$(this).removeClass("selected")})},initCart:function(e){e=e<99?e:99,$(".js-seg-bar__mini-cart-count").html(e),""!=e?($(".js-seg-bar__cart").removeClass("icon_bag").addClass("icon_bag_item"),$(".js-seg-bar__cart").addClass("js-header-dropdown-mobile"),$(".js-seg-bar__mini-cart-count-dropdown").html(e),$(".js-seg-bar__cart").parent().customPopup({shift:"mainRight",contentNode:$(".minicart__popup"),event:"generate",width:"350",arrow:"arrow-dark"})):$("#js-minicart-message").length>0&&($(".js-seg-bar__cart").addClass("js-header-dropdown-mobile"),$(".js-seg-bar__cart").parent().customPopup({shift:"mainRight",contentNode:$(".minicart__popup"),event:"generate",width:"350",arrow:"arrow-dark"})),miniCart.autoExpand()},updateWishlistCount:function(e){e=e<99?e:99,$(".js-seg-bar__wl-count").html(e),""!=e&&($(".js-seg-bar__wishlist").removeClass("icon_favourites").addClass("icon_favourites_item"),$(".js-seg-bar__wishlist").addClass("js-header-dropdown-mobile"),$(".js-seg-bar__wishlist").parent().customPopup({shift:"mainRight",contentNode:$(".wl-info__popup"),event:"mouseover",width:"200",arrow:"arrow-dark"}))},initLocalizationBar:function(){var e=$(".js-localization-bar"),t=$(".js-localization-bar-country-selection"),i=$(".js-localization-bar-language-selection");e.show(),$(".js-localization-bar-confirmation").hide(),$(".js-localization-bar-btn-change").hide(),$(".js-localization-bar-btn-ok2").hide(),$(".js-localization-bar-country").show(),$(".js-localization-bar-language").show(),$(".js-localization-bar-btn-ok1").show(),t.click(function(){Zalora.Header.HeaderController.country=$(this).attr("data"),Zalora.Header.HeaderController.countryName=$(this).text().trim(),t.removeClass("b-header__text-selected"),$(this).addClass("b-header__text-selected")}),t.first().click(),i.click(function(){Zalora.Header.HeaderController.language=$(this).attr("data"),Zalora.Header.HeaderController.languageName=$(this).text().trim(),i.removeClass("b-header__text-selected"),$(this).addClass("b-header__text-selected")}),i.first().click(),$(".js-localization-bar-btn-change").click(function(){Zalora.Header.HeaderController.initLocalizationBar()}),$(".js-localization-bar-btn-ok1").click(function(){$(".js-localization-bar-confirmation").show(),$(".js-localization-bar-btn-change").show(),$(".js-localization-bar-btn-ok2").show(),$(".js-localization-bar-country").hide(),$(".js-localization-bar-language").hide(),$(".js-localization-bar-btn-ok1").hide(),$(".js-localization-bar-language-name").text(Zalora.Header.HeaderController.languageName),$(".js-localization-bar-country-name").text(Zalora.Header.HeaderController.countryName)}),$(".js-localization-bar-btn-ok2").click(function(){var e="?setLang="+Zalora.Header.HeaderController.language;e=Zalora.Header.HeaderController.country?e+"&country="+Zalora.Header.HeaderController.country:e,$.cookie("showLocalizationNotice",1),window.location.href=window.location.href.replace(/[\?#].*|$/,e)})}};var miniCart={timehandler:!1,isCartNotEmpty:parseInt($("#shopping-bag-qty").text(),10)>0||$("#js-minicart-message").length>0,urlAddToCart:"/cart/add/",urlAddCoupon:"/ajax/cart/addcoupon/",initialize:function(){this.sync(),this.viewCartBinding(),this.autoSubmitCode(),void 0!==window.store.timer&&window.store.timer>0&&cartTimer.start(window.store.timer)},sync:function(){var e=this;helper.isTouchDevice()&&!Zalora.Header&&e.syncTablet(),e.autoExpand(),$(".js-headBag").on("mouseenter",function(){e.isCartNotEmpty=parseInt($("#shopping-bag-qty").text(),10)>0||$("#js-minicart-message").length>0,e.isCartNotEmpty&&(e.timehandler=!0,e.triggerMiniCartImg(),$(".js-shoppingBag").slideDown("slow"),e.viewCartTracking())}).on("mouseleave",function(){e.isCartNotEmpty=parseInt($("#shopping-bag-qty").text(),10)>0||$("#js-minicart-message").length>0,e.isCartNotEmpty&&(e.timehandler=!1,setTimeout(function(){!1===e.timehandler&&$(".js-shoppingBag").slideUp("slow",function(){$("#js-minicart-message").hasClass("remove-after-show-once")&&$("#js-minicart-message").remove()})},800))}),$(".js-shoppingBag").hover(function(){e.timehandler=!0},function(){e.timehandler=!1,setTimeout(function(){!1===e.timehandler&&$(".js-shoppingBag").slideUp("slow",function(){$("#js-minicart-message").hasClass("remove-after-show-once")&&$("#js-minicart-message").remove()})},800)}),$(".popup-window").live("click",function(e){e.preventDefault(),window.open($(this).attr("href"),!1,"width=535, height=650,top=0, left=0")}),$("#js-minicart-message .btn").on("click",function(){$(this).attr("disabled")||e.addCoupon($(this).html(),this)})},syncTablet:function(){var e=this,t=$(".js-shoppingBag");$(".js-headBag").on("touchstart click",function(i){e.isCartNotEmpty=parseInt($("#shopping-bag-qty").text(),10)>0||$("#js-minicart-message").length>0,t.hasClass("open")&&(t.removeClass("open"),location.href=$(".js-headBag").attr("href")),e.isCartNotEmpty&&(e.timehandler=!0,e.triggerMiniCartImg(),t.addClass("open"),t.stop(!0,!0).slideDown("slow")),i.preventDefault()}),$(document).on("touchstart click",function(e){var i=$(e.target);i.hasClass("b-shoppingBag")||0!=i.parents(".b-shoppingBag").length||(t.removeClass("open"),t.stop(!0,!0).slideUp("slow"))})},autoSubmitCode:function(){$("#couponCode").blur(function(){""!=$(this).val()&&$(this).val()!=$("#error_coupon_code").val()&&$("#cart-coupon").click()}),$("#cart-items-list-form").submit(function(){$("#cart-coupon").attr("disabled","disabled")})},triggerMiniCartImg:function(){$(".b-shoppingBag__bagImg").not(".loaded").each(function(e,t){var i=$(this).attr("data-src");$(this).attr("src",i),$(this).addClass("loaded")})},addItemAjaxCart:function(e,t){var i=this,n=this.urlAddToCart;$.ajax({type:"POST",url:n,cache:!1,data:e,beforeSend:function(){$(t).html("<span class='js-cartAjaxLoading'></span>"),$(t).toggleClass("js-loading")},success:function(e,n,o){i.ajaxCartAction(e,o,t),"undefined"!=typeof dataLayer&&dataLayer.push({event:"Add to cart"})},complete:function(){i.isCartNotEmpty=parseInt($("#shopping-bag-qty").text(),10)>0||$("#js-minicart-message").length>0,i.sync(),$(t).attr("disabled",!1),$(t).toggleClass("js-loading"),$(t).html($(t).attr("title"))}})},ajaxCartAction:function(e,t,i){if(msg=t.getResponseHeader("x-json"))if(msg=JSON.parse(msg),"object"==typeof msg)if("error"==msg.messages[0].type)msg.messages[0].redirect?helper.redirectToCart():($("#content").prepend("<div class='js-msg box s-error mbs msgBox l-pageWrapper mbm mtm'><div class='pam'>"+msg.messages[0].message+"</div></div>"),$(".js-msg").fadeOut(5e3));else{var n=this,o=msg.cartCount;i&&"undefined"!=typeof wishlist&&wishlist.editItems&&(wishlist.removeItemSuccessfully(i),msg.messages[0].message&&($("#content").prepend("<div class='js-msg box s-error mbs msgBox l-pageWrapper mbm mtm'><div class='pam'>"+msg.messages[0].message+"</div></div>"),$(".js-msg").fadeOut(5e3))),$("#shoppingBagBlock").html(e),Zalora.Header&&Zalora.Header.HeaderController&&Zalora.Header.HeaderController.model&&o&&(Zalora.Header.HeaderController.model.cart_count=o,Zalora.Header.HeaderController.initCart(o),$(".js-seg-bar__cart").parent().trigger("generate")),n.triggerMiniCartImg(),$(".js-shoppingBag").slideDown("slow"),n.viewCartTracking(),$(".js-bagList").scrollTop($(".js-bagList")[0].scrollHeight),setTimeout(function(){$(".js-shoppingBag").slideUp("slow")},4e3)}else Raven.captureMessage("ajax cart x-json fail",{extra:{msg:msg}})},viewCartTracking:function(){"undefined"!=typeof dataLayer&&dataLayer.push({event:"View cart"})},viewCartBinding:function(){$(document).on("click",".js-viewCart",function(){miniCart.viewCartTracking()})},addCoupon:function(e,t){var i=this,n=this.urlAddCoupon;$.ajax({type:"POST",url:n,cache:!1,data:{coupon:e},beforeSend:function(){$("#js-minicart-message .btn").attr("disabled",!0),$("#js-minicart-message").append("<div class='disable-overlay'><span class='loading'></span></div>")},success:function(e,t,i){$("#js-minicart-message").find(".disable-overlay").remove(),$("#js-minicart-message-content").html(e)},complete:function(){i.timehandler=!0,i.triggerMiniCartImg(),$(".js-shoppingBag").slideDown("slow"),i.viewCartTracking()}})},autoExpand:function(){$("#js-minicart-message").hasClass("minicart-auto-expand")&&(miniCart.timehandler=!0,miniCart.triggerMiniCartImg(),$(".js-shoppingBag").slideDown("slow"),miniCart.viewCartTracking())}},cartTimer={count:0,elementId:"timer",interval:null,start:function(e){this.count=e,$("#"+this.elementId)&&e>0&&(this.interval=window.setInterval($.proxy(this.refreshTimer,this),1e3))},refreshTimer:function(){var e,t,i=0,n=0;this.count>0?(this.count>59?(i=Math.floor(this.count/60),n=this.count-60*i):n=this.count,e=i.toString(),t=n.toString(),i<10&&(e="0"+e),n<10&&(t="0"+t),$("#"+this.elementId).html(e+":"+t)):(window.clearInterval(this.interval),$("#"+this.elementId).html("00:00"),window.location.reload()),this.count--}},Zalora=Zalora||{};Zalora.Header=Zalora.Header||{},Zalora.Header.HeaderModel={first_name:"",wallet_balance:"",wishlist_count:"",cart_count:"",language:"",country_iso:"",current_catalog:"",current_segment:"",current_page_type:"",cms_content:"",category_bar_model:"",init:function(e){return void 0!==e&&(this.first_name=e.firstName||"",this.wallet_balance=e.walletBalance||"",this.wishlist_count=e.wishlistCount||"",this.cart_count=e.cartCount||"",this.language=e.language||"",this.country_iso=e.countryIso||"",this.current_catalog=e.currentCatalog||"",this.current_segment=e.currentSegment||"",this.current_page_type=e.currentPageType||"",this.cms_content=e.cmsContent||"",this.category_bar_model=e.categoryBarModel||""),this}};var Zalora=Zalora||{};Zalora.Header=Zalora.Header||{},Zalora.Header.HeaderView={model:"",init:function(){this.cacheElements()},cacheElements:function(){this.$headerSkeleton=$(".header__skeleton")},setModel:function(e){this.model=e},renderHeader:function(){}};var Zalora=Zalora||{};Zalora.Header=Zalora.Header||{},Zalora.Header.segmentBarView={model:"",init:function(){this.$headerSkeleton=$(".header__skeleton")},setModel:function(e){this.model=e},renderHeader:function(){},sync:function(){}},function(){"use strict";$.prototype.customPopup=function(e){var t=this,i=$(".l-pageWrapper"),n=(parseInt(e.width,10),parseInt(e.topMore,10)),o=function(o){var a=e.contentNode;if(o&&a.html(o+b),a&&a.html()){if(a.hasClass("js-custom-popup"))return void(a.is(":visible")?a.hide():a.show());var s=$('<span class="js-arrow"></span>'),l=i.offset().left,c=parseInt(i.css("width"),10),u=parseInt(t.css("marginLeft")),h=parseInt(t.css("marginTop")),d=t.outerHeight(),p=t.outerWidth(),f=e.width?e.width:c,g=t.position().left,m=t.position().top,v=m+h+d,w=f-(l+c-g)+10+p/2,y={width:f+"px"},b='<div class="b-header__padding"></div>';switch(a.addClass("js-custom-popup"),e.shift){case"bottomLeft":y.left=g+"px";break;case"bottomRight":y.left=g+p-f+"px";break;case"mainLeft":y.left=l+"px";break;case"mainRight":y.left=l+c-f+"px";break;case"bottomCenter":y.left=g+u+(p-f)/2+"px";break;case"fullWidth":y.left="0px",y.width="100%",a.addClass("js-custom-popup__fullwidth"),w=g-l-10+p/2}w&&e.arrow&&(a.prepend(s),s.css("left",w+"px"),s.addClass("js-"+e.arrow),v+=10),v+=n,a.prepend(b),y.top=v+"px",a.css(y),a.show(),a.addClass("b-header__nonclickable"),r()}},a=function(){if(e.focus){var t=$("header").height(),i=$(document).height();$("body").append("<div id='overlay'></div>"),$("#overlay").css({top:t+"px"}).height(i).addClass("js-custom-popup-focus")}e.callback&&e.callback()},s=function(){$("#overlay").remove(),e.callback&&e.callback()},r=function(){
e.contentNode.find('[data-load="lazy"]').each(function(){$(this).lazyload()})};switch(e.event){case"click":this.on(e.event,function(){$(this).trigger("toggle")});break;case"mouseover":this.on({mouseenter:function(){$(".js-custom-popup").hide(),o(),a()},mouseleave:function(t){e.contentNode.hide(),s()}});break;case"generate":o(),$(".js-custom-popup").hide()}this.on({generate:function(){o(),$(".js-custom-popup").hide(),a()},toggle:function(){this.generated?(this.generated=!1,$(".js-custom-popup").hide(),s()):(o(),this.generated=!0,a())}})},$(document).bind("mousedown",function(e){!$(e.target).parents(".js-custom-popup").length>0&&($(".js-custom-popup").hide(),$("#overlay").remove())})}();var Searchv2={KEYCODE_ENTER:13,KEYCODE_SPACE:32,KEYCODE_LEFT:37,KEYCODE_UP:38,KEYCODE_RIGHT:39,KEYCODE_DOWN:40,LIMIT_TERM_SIZE_TRACKING:2,performSearchWithAllExceptKeys:[],inputSearchBox:$(".js-seg-bar-search__selSearchInput"),genderSelectBox:$(".js-search-gender-select"),searchBox:$(".js-seg-bar__search"),searchValue:"",additionSuggestTerm:"",lastSearchValue:"",defaultResultContainer:$(".js-searchsuggest__popup"),resultSelector:"",searchCategorySelected:$("#searchCategory"),searchForm:$("#onsiteSearch"),selectedResult:null,autoCompleteRequest:null,autoCompleteCategoryId:null,autoCompleteCategoryUrlKey:null,catalogtype:null,shoptype:null,isCostaSearchSuggestionAPIVersion2Enabled:!1,isSpellCheckEnabled:!1,isSpellCheckWithSuggestionEnabled:!1,isFirstTimeFocus:!0,specialKeys:{},cacheStore:{},request:null,keyUpId:null,SUGGESTED_TERMS_LIMIT:3,SUGGESTED_BRAND_LIMIT:2,CURRENCY_SEPARATOR:" ",currency_format:"",search_suggestion_label:"Search Suggestions",product_suggestion_label:"Product Suggestions",now_label:"NOW",renderSuggestedProduct:null,renderSuggestedTerm:null,renderSuggestedBrand:null,renderAdditionSuggestedFunc:null,renderSuggestedTermsFunc:null,renderAdditionalSearchResultFunc:null,renderSearchResultFunc:null,termRouteUrl:null,resultCount:0,defaultDebounceValue:300,useThrottle:!1,throttleValue:null,inLabel:"in",init:function(e){var t=this;if(void 0!==e.costa_search_suggest_api_version_2&&1===e.costa_search_suggest_api_version_2?this.isCostaSearchSuggestionAPIVersion2Enabled=!0:this.isCostaSearchSuggestionAPIVersion2Enabled=!1,void 0!==e.costa_spell_check&&1===e.costa_spell_check?this.isSpellCheckEnabled=!0:this.isSpellCheckEnabled=!1,void 0!==e.costa_spell_check_with_suggestion&&1===e.costa_spell_check_with_suggestion?this.isSpellCheckWithSuggestionEnabled=!0:this.isSpellCheckWithSuggestionEnabled=!1,void 0!==e.shoptype&&(this.shoptype=e.shoptype),void 0!==e.catalogtype&&(this.catalogtype=e.catalogtype),e.use_search_throttle&&null!==e.search_throttle_value&&(this.useThrottle=!0,this.throttleValue=e.search_throttle_value),this.specialKeys.alt=!1,this.specialKeys.ctrl=!1,this.specialKeys.cmd=!1,this.currency_format=e.currency_format,this.search_suggestion_label=e.search_suggestion_label,this.product_suggestion_label=e.product_suggestion_label,this.now_label=e.now_label,this.inLabel=e.in_label,this.performSearchWithAllExceptKeys=[this.KEYCODE_LEFT,this.KEYCODE_UP,this.KEYCODE_RIGHT,this.KEYCODE_DOWN,this.KEYCODE_ENTER],this.renderSuggestedProduct=this.makeRenderSuggestedProduct(),this.renderSuggestedTerm=this.makeRenderSuggestedTerm(),this.renderSuggestedBrand=this.makeRenderSuggestedBrand(),this.inputSearchBox.on("keyup",t.performSearch.bind(this)),this.inputSearchBox.on("keydown",this.performNavigation.bind(this)),this.renderSuggestedTermsFunc=this.renderSuggestedTerms.bind(this),this.renderAdditionSuggestedFunc=this.renderAdditionSuggestedTerms.bind(this),this.renderSearchResultFunc=this.renderSearchResult.bind(this),this.inputSearchBox.on("focus",function(){t.resultCount&&t.resultSelector.show()}),this.useThrottle?this.performSearchQuery=_.throttle(this.performSearchQuery,this.throttleValue):this.performSearchQuery=_.debounce(this.performSearchQuery,this.defaultDebounceValue),$(document).on("click",".js-search__spellcheck-result",this.onClickOnSpellcheckResult.bind(this)),this.genderSelectBox){var i=$.cookie("userGender");i&&t.genderSelectBox.val(i),this.genderSelectBox.change(function(e){var i=$(this).val();$.cookie("userGender",i,{expires:t.getCookieExpireTime(),path:"/",secure:!0})})}$(document).keydown(function(e){t.setFocusToSearchBar(e)}),$(document).keyup(function(e){17==e.which&&(t.specialKeys.alt=!1),18==e.which&&(t.specialKeys.ctrl=!1),91==e.which&&(t.specialKeys.cmd=!1)}),this.addModernizerPlaceholder(),$(document).mouseup(function(e){t.searchBox.is(e.target)||0!==t.searchBox.has(e.target).length||t.hideSearchResult()})},onClickOnSpellcheckResult:function(e){e.preventDefault();var t=$(e.target).attr("title");this.inputSearchBox.val(t).focus(),this.searchValue=t,this.performSearchQuery(this.searchValue)},setEmptyResult:function(){this.resultSelector&&this.resultSelector.html("").fadeOut(100),this.resultCount=0},hideSearchResult:function(){this.resultSelector&&this.resultSelector.fadeOut(200)},getSelectedResult:function(){return $("#ac-"+this.selectedResult)},performResultSelection:function(e){this.unselectResult(),e===this.KEYCODE_DOWN?this.selectedResult=this.selectedResult+1<=this.resultCount?this.selectedResult+1:0:e===this.KEYCODE_UP&&(this.selectedResult=this.selectedResult>0?this.selectedResult-1:this.resultCount),this.getSelectedResult().addClass("s-selected")},redirect:function(e){window.location.href=e},performRedirection:function(){var e=this.getSelectedResult();e.length?this.redirect(e.find("a").attr("href")):""!=this.searchValue&&(Zalora.Tracking.sendEvent("search","search",this.searchValue,"men"==this.genderSelectBox.val()?0:1),this.redirect(this.getSearchDetailPageUrl(this.searchValue)))},performNavigation:function(e){if(e.keyCode===this.KEYCODE_ENTER&&(e.preventDefault(),this.performRedirection()),$(this.resultSelector).is(":visible"))return-1!==[this.KEYCODE_DOWN,this.KEYCODE_UP].indexOf(e.keyCode)?(e.preventDefault(),void this.performResultSelection(e.keyCode)):void 0},performSearch:function(e){var t=this.inputSearchBox.val();if(this.setResultSelector(),-1===this.performSearchWithAllExceptKeys.indexOf(e.keyCode)){if(""==$.trim(t))return!1;this.searchValue=this.sanitizeSearchString(t),this.setAutoCompleteCategoryUrlKey(),this.performSearchQuery(this.searchValue)}},sanitizeSearchString:function(e){return e=e.replace(/[(?=+*?]/g,""),e=$.trim(e)},setResultSelector:function(){this.inputSearchBox.attr("data-result-node-id")?this.resultSelector="#"+this.inputSearchBox.attr("data-result-node-id"):this.resultSelector=this.defaultResultContainer},unselectResult:function(){this.selectedResult&&this.getSelectedResult().removeClass("s-selected")},setAutoCompleteCategoryUrlKey:function(){1===$(this.searchCategorySelected).length&&(this.autoCompleteCategoryId=$("#searchCategory option:selected").attr("cat_id"),this.autoCompleteCategoryUrlKey=$("#searchCategory").val())},performSearchQuery:function(e){if(e!==this.lastSearchValue){this.lastSearchValue=e;var t=this.getSearchUrl(e),i=this;$.isEmptyObject(this.getCachedValue(e))?(null===this.request||this.useThrottle||this.request.abort(),this.request=$.get(t,function(t){t=$.isEmptyObject(t)?[]:$.parseJSON(t);var n=e,o=[],a=[],s=[];t.length>0&&(n=t[0],o=t[1],i.isCostaSearchSuggestionAPIVersion2Enabled&&void 0!==t[1]&&(o=t[1].categories,a=t[1].products,s=t[1].brands)),i.validateResult(o,a,s)?(i.setCacheStore(n,t),i.renderSearchResult(o,a,s)):i.isSpellCheckEnabled?this.request=i.handleSpellCheck(i,e):i.setEmptyResult()}).fail(function(){i.setEmptyResult()}).done(function(){i.addGATracking(),i.request=null})):this.renderCachedSuggestResult(this.getCachedValue(e),this.renderSearchResultFunc)}},validateResult:function(e,t,i){return void 0!=e&&e.length>0||void 0!=t&&t.length>0||void 0!=i&&i.length>0},makeRenderSuggestedResult:function(e){return _.template($(e).html())},makeRenderSuggestedProduct:function(){return this.makeRenderSuggestedResult("#suggested-product-template")},makeRenderSuggestedTerm:function(){return this.makeRenderSuggestedResult("#suggested-term-template")},makeRenderSuggestedBrand:function(){return this.makeRenderSuggestedResult("#suggested-brand-template")},getTermRouteUrl:function(){if(null===this.termRouteUrl){var e="catalog";null!==this.autoCompleteCategoryUrlKey&&""!==this.autoCompleteCategoryUrlKey&&(e=this.autoCompleteCategoryUrlKey),void 0!==window.store.route_url&&(e=window.store.route_url),this.termRouteUrl=e}return this.termRouteUrl},getSearchDetailPageUrl:function(e,t){return this.isCostaSearchSuggestionAPIVersion2Enabled&&"string"!=typeof e?e.categoryUrl+"?q="+Searchv2.encodeSearchQuery(t)+"&classifier=false&SearchSuggest=true&gender="+this.genderSelectBox.val():this.getTermRouteUrl()+"/?q="+Searchv2.encodeSearchQuery(e)},makePrepareSuggestedProductTemplateVariables:function(e){return function(t,i){return{name:t.meta.name,image:t.image_gallery,url:"/"+t.link+(t.link.indexOf("?")>0?"&":"?")+"from=search",price:this.getSortedCurrencyFormat(t.meta.price),specialPrice:t.meta.special_price?this.getSortedCurrencyFormat(t.meta.special_price):null,nowLabel:this.now_label,index:i+e+1}}},makePrepareSuggestedTermTemplateVariables:function(e){return function(t,i){return{title:this.getCategoryTitle(t),keyword:this.getCategoryLabel(t),index:e+i+1,url:this.getSearchDetailPageUrl(t,Searchv2.searchValue),className:""}}},makePrepareAdditionSuggestedTermTemplateVariables:function(e){return function(t,i){return{title:this.getCategoryTitle(t),keyword:this.getAdditionSuggestCategoryLabel(t),index:e+i+1,url:this.getSearchDetailPageUrl(t,Searchv2.additionSuggestTerm),className:""}}},makePrepareSuggestedBrandTemplateVariables:function(e){return function(t,i){return{title:t.name,keyword:t.name,index:e+i+1,url:t.brandUrl,className:""}}},makeCorrectedKeywordTemplateVariables:function(e,t){var i=this.getSuggestedKeyword(e);return{title:i,keyword:this.highlightSuggestion(i),index:t+1,url:this.getSearchDetailPageUrl(i),className:"js-search__spellcheck-result"}},renderSuggestedProducts:function(e,t){return e.map(_.compose(this.renderSuggestedProduct,this.makePrepareSuggestedProductTemplateVariables(t).bind(this))).join("")},renderSuggestedTerms:function(e,t,i){return e.slice(0,t).map(_.compose(this.renderSuggestedTerm,this.makePrepareSuggestedTermTemplateVariables(i).bind(this))).join("")},renderAdditionSuggestedTerms:function(e,t,i){return e.slice(0,t).map(_.compose(this.renderSuggestedTerm,this.makePrepareAdditionSuggestedTermTemplateVariables(i).bind(this))).join("")},renderSuggestedBrands:function(e,t,i){return this.sortBrandsSortedScore(e),e.slice(0,t).map(_.compose(this.renderSuggestedBrand,this.makePrepareSuggestedBrandTemplateVariables(i).bind(this))).join("")},renderCorrectedKeywords:function(e){return e.map(_.compose(this.renderSuggestedTerm,this.makeCorrectedKeywordTemplateVariables.bind(this))).join("")},getSuggestedTermLimit:function(e,t){return this.isCostaSearchSuggestionAPIVersion2Enabled&&t.length&&e.length>this.SUGGESTED_TERMS_LIMIT?this.SUGGESTED_TERMS_LIMIT:e.length},getSuggestedBrandLimit:function(e){return e.length>this.SUGGESTED_BRAND_LIMIT?this.SUGGESTED_BRAND_LIMIT:e.length},renderSearchResult:function(e,t,i){if(e.length+t.length+i.length>0){var n={searchSuggestLabel:this.search_suggestion_label,productSuggestLabel:this.product_suggestion_label,startIndex:0},o='<ul class="fsm">'+this.buildSearchResult(e,t,i,n,this.renderSuggestedTermsFunc)+"</ul>";this.resultSelector.html(o),this.resultSelector.css({zIndex:102,width:this.searchBox.width()}).show()}else this.setEmptyResult()},renderSpellcheckTermSuggestion:function(e){null!==e&&null!==e.suggestion?(this.selectedResult=0,this.resultCount=e.suggestion.length,this.resultSelector.html('<ul class="fsm">'+this.renderCorrectedKeywords(e.suggestion)+"</ul>"),this.resultSelector.css({zIndex:102,width:this.searchBox.width()}).show()):this.setEmptyResult()},renderSpellcheckWithProductSuggestion:function(e){if(null!==e.termSuggest&&null!==e.termSuggest.suggestion){this.selectedResult=0,this.resultCount=e.termSuggest.suggestion.length;var t=[],i=[],n=[];e.productSuggest.length>1&&(t=e.productSuggest[1].categories,i=e.productSuggest[1].products,n=e.productSuggest[1].brands),e.productSuggest.length>0&&(this.additionSuggestTerm=e.productSuggest[0]),this.resultSelector.html('<ul class="fsm">'+this.renderCorrectedKeywords(e.termSuggest.suggestion)+this.buildAdditionalSearchResult(t,i,n,e.termSuggest.suggestion.length)+"</ul>"),this.resultSelector.css({zIndex:102,width:this.searchBox.width()}).show()}else this.setEmptyResult()},renderSpellCheck:function(e,t){e.isSpellCheckWithSuggestionEnabled?e.renderSpellcheckWithProductSuggestion(t):0===t.response.numFound&&e.renderSpellcheckTermSuggestion(t.spellcheck.suggestions.checkSpellItem)},setFocusToSearchBar:function(e){17===e.which&&(this.specialKeys.alt=!0),18===e.which&&(this.specialKeys.ctrl=!0),91===e.which&&(this.specialKeys.cmd=!0);var t=this.inputSearchBox,i=e.which>=48&&e.which<=90,n=document.activeElement.nodeName,o=0!==t.length,a=document.activeElement.id==t.attr("id"),s="INPUT"==n||"TEXTAREA"==n,r=this.specialKeys.alt||this.specialKeys.ctrl||this.specialKeys.cmd;s||a||!o||!i||r||t.focus()},addModernizerPlaceholder:function(){if("undefined"!=typeof Modernizr&&!Modernizr.input.placeholder){var e=this,t=this.inputSearchBox;$("[placeholder]").focus(function(){t.val()==t.attr("placeholder")&&(t.val(""),t.removeClass("placeholder"))}).blur(function(){""!==t.val()&&t.val()!==t.attr("placeholder")||(t.addClass("placeholder"),t.val(t.attr("placeholder")))}).blur(),$("[placeholder]").parents("form").submit(function(){e.inputSearchBox.find("[placeholder]").each(function(){t.val()==t.attr("placeholder")&&t.val("")})})}},setCacheStore:function(e,t){cacheKey=this.getCachePrefix()+e,cacheKey in this.cacheStore||(this.cacheStore[cacheKey]=t)},getCachedValue:function(e){return cacheKey=this.getCachePrefix()+e,cacheKey in this.cacheStore?this.cacheStore[cacheKey]:{}[cacheKey]={}},addGATracking:function(){this.searchValue.length>this.LIMIT_TERM_SIZE_TRACKING&&Zalora.Tracking.sendEvent("search","suggest",this.searchValue,this.resultCount)},getLevernshteinMatrix:function(e,t){if(0===e.length)return t.length;if(0===t.length)return e.length;var i,n=[];for(i=0;i<=t.length;i++)n[i]=[i];var o;for(o=0;o<=e.length;o++)n[0][o]=o;for(i=1;i<=t.length;i++)for(o=1;o<=e.length;o++)t.charAt(i-1)==e.charAt(o-1)?n[i][o]=n[i-1][o-1]:n[i][o]=Math.min(n[i-1][o-1]+1,Math.min(n[i][o-1]+1,n[i-1][o]+1));return n},getTransformationSteps:function(e){for(var t=Searchv2.searchValue,i=Searchv2.getLevernshteinMatrix(e,t),n=t.length,o=e.length,a=[];n>0&&o>0;){var s=i[n][o],r=Math.min(i[n-1][o-1],Math.min(i[n][o-1],i[n-1][o]));r!=s&&$.inArray(o,a)<0&&a.push(o),r==i[n-1][o-1]?(n=Searchv2.reduceIndex(n),o=Searchv2.reduceIndex(o)):r==i[n][o-1]?(n=n,o=Searchv2.reduceIndex(o)):r==i[n-1][o]&&(n=Searchv2.reduceIndex(n),o=o)}return a},highlightSuggestion:function(e){var t=e,n=this.getTransformationSteps(e);if(void 0!=n)for(i=0;i<n.length;i++){var o=t.substr(0,n[i]-1),a=t.substr(n[i],t.length),s=t.charAt(n[i]-1);if(void 0!=s&&""!=s&&(t=o.concat("<b><u>"+s+"</u></b>",a)),$.isEmptyObject(a))break}return t},reduceIndex:function(e){return e>0?e-1:e},getLastWord:function(){for(var e=Searchv2.searchValue.split(" "),t=e.length-1;t>0;t--)if(""!=e[t])return e[t];return Searchv2.searchValue},getSuggestedKeyword:function(e){var t=Searchv2.searchValue.lastIndexOf(" ");return t>=0?Searchv2.searchValue.substr(0,t)+" "+e:e},getValidPartKeyword:function(){var e=Searchv2.searchValue.lastIndexOf(" ");return e>=0?Searchv2.searchValue.substr(0,e):""},getSortedCurrencyFormat:function(e){return _.template(this.currency_format,{meta:{price:e}})},getHeaderItem:function(e){return'<li class="ssg-item--header">'+e+"</li>"},getCategoryTitle:function(e){return this.isCostaSearchSuggestionAPIVersion2Enabled?e.name:e},getCategoryLabel:function(e){return this.isCostaSearchSuggestionAPIVersion2Enabled?this.getUppercaseAndBoldCategoryLabel(this.searchValue,e):e},getAdditionSuggestCategoryLabel:function(e){return this.getUppercaseAndBoldCategoryLabel(this.additionSuggestTerm,e)},getUppercaseAndBoldCategoryLabel:function(e,t){return this.getTermUppercaseAndBold(e)+this.inLabel+" "+t.name},sortCategoryByScore:function(e){return this.isCostaSearchSuggestionAPIVersion2Enabled&&null!=e&&e.sort(function(e,t){return e.scored===t.scored?e.name.localeCompare(t.name):t.scored-e.scored}),e},sortBrandsSortedScore:function(e){return this.isCostaSearchSuggestionAPIVersion2Enabled&&null!=e&&e.sort(function(e,t){return t.scored-e.scored}),e},buildAdditionalSearchResult:function(e,t,i,n){if(e.length+t.length+i.length>0){var o=this.getTermUppercaseAndBold(this.additionSuggestTerm),a={searchSuggestLabel:o+this.search_suggestion_label,productSuggestLabel:o+this.product_suggestion_label,startIndex:n};return this.buildSearchResult(e,t,i,a,this.renderAdditionSuggestedFunc)}return""},getTermUppercaseAndBold:function(e){return"<b>"+e[0].toUpperCase()+e.slice(1)+"</b> "},buildSearchResult:function(e,t,i,n,o){var a=this.getSuggestedTermLimit(e,t),s=this.getSuggestedBrandLimit(i);this.selectedResult=0,this.resultCount=n.startIndex+s+a+t.length;var r="";return i.length+e.length>0&&(r+=this.getHeaderItem(n.searchSuggestLabel),i.length&&(r+=this.renderSuggestedBrands(i,s,n.startIndex)),e.length&&(this.sortCategoryByScore(e),r+=o(e,a,s+n.startIndex))),t.length&&(r+=this.getHeaderItem(n.productSuggestLabel),r+=this.renderSuggestedProducts(t,a+s+n.startIndex)),r},getSearchUrl:function(e){var t=this.isCostaSearchSuggestionAPIVersion2Enabled?"/_c/search/suggest_with_product/?q=":"/_c/search/suggest/?q=";return t+=Searchv2.encodeSearchQuery(e)+"&catalogtype="+this.catalogtype+"&shoptype="+this.shoptype,t+="&gender="+this.genderSelectBox.val(),null!==this.autoCompleteCategoryId&&""!==this.autoCompleteCategoryId&&(t+="&cat="+this.autoCompleteCategoryId),t},handleSpellCheck:function(e,t){var i="spell_check_"+t;if($.isEmptyObject(e.getCachedValue(i))){var n=e.getSpellCheckUrl();return $.get(n,function(t){if(!$.isEmptyObject(t))try{var n=$.parseJSON(t);e.renderSpellCheck(e,n),e.setCacheStore(i,n)}catch(t){e.setEmptyResult(),Raven.captureException(t)}})}try{e.renderSpellCheck(e,e.getCachedValue(i),this.renderSearchResultFunc)}catch(t){e.setEmptyResult(),Raven.captureException(t)}},renderCachedSuggestResult:function(e,t){var i=e[1],n=[],o=[];this.isCostaSearchSuggestionAPIVersion2Enabled&&void 0!==e[1]&&(i=e[1].categories,n=e[1].products,o=e[1].brands),this.validateResult(i,n,o)?t(i,n,o):this.setEmptyResult()},getSpellCheckUrl:function(){var e=this.isSpellCheckWithSuggestionEnabled?"/_c/checkspell_with_suggestion/?q=":"/_c/checkspell/?q=";return e+=Searchv2.encodeSearchQuery(Searchv2.getLastWord()),this.isSpellCheckWithSuggestionEnabled&&(e+="&catalogtype="+this.catalogtype+"&shoptype="+this.shoptype+"&validpart="+this.getValidPartKeyword(),e+="&gender="+this.genderSelectBox.val(),null!==this.autoCompleteCategoryId&&""!==this.autoCompleteCategoryId&&(e+="&cat="+this.autoCompleteCategoryId)),e},getCachePrefix:function(){return this.genderSelectBox.val()+"_"},getCookieExpireTime:function(){var e=new Date;return e.setMonth(e.getMonth()+3),e},encodeSearchQuery:function(e){return encodeURIComponent(e).replace(/%20/g,"+")}};(function(){var e=this,t=e._,i={},n=Array.prototype,o=Object.prototype,a=Function.prototype,s=n.push,r=n.slice,l=n.concat,c=o.toString,u=o.hasOwnProperty,h=n.forEach,d=n.map,p=n.reduce,f=n.reduceRight,g=n.filter,m=n.every,v=n.some,w=n.indexOf,y=n.lastIndexOf,b=Array.isArray,$=Object.keys,_=a.bind,C=function(e){return e instanceof C?e:this instanceof C?void(this._wrapped=e):new C(e)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=C),exports._=C):e._=C,C.VERSION="1.5.2";var S=C.each=C.forEach=function(e,t,n){if(null!=e)if(h&&e.forEach===h)e.forEach(t,n);else if(e.length===+e.length){for(var o=0,a=e.length;a>o;o++)if(t.call(n,e[o],o,e)===i)return}else for(var s=C.keys(e),o=0,a=s.length;a>o;o++)if(t.call(n,e[s[o]],s[o],e)===i)return};C.map=C.collect=function(e,t,i){var n=[];return null==e?n:d&&e.map===d?e.map(t,i):(S(e,function(e,o,a){n.push(t.call(i,e,o,a))}),n)};var k="Reduce of empty array with no initial value";C.reduce=C.foldl=C.inject=function(e,t,i,n){var o=arguments.length>2;if(null==e&&(e=[]),p&&e.reduce===p)return n&&(t=C.bind(t,n)),o?e.reduce(t,i):e.reduce(t);if(S(e,function(e,a,s){o?i=t.call(n,i,e,a,s):(i=e,o=!0)}),!o)throw new TypeError(k);return i},C.reduceRight=C.foldr=function(e,t,i,n){var o=arguments.length>2;if(null==e&&(e=[]),f&&e.reduceRight===f)return n&&(t=C.bind(t,n)),o?e.reduceRight(t,i):e.reduceRight(t);var a=e.length;if(a!==+a){var s=C.keys(e);a=s.length}if(S(e,function(r,l,c){l=s?s[--a]:--a,o?i=t.call(n,i,e[l],l,c):(i=e[l],o=!0)}),!o)throw new TypeError(k);return i},C.find=C.detect=function(e,t,i){var n;return j(e,function(e,o,a){return t.call(i,e,o,a)?(n=e,!0):void 0}),n},C.filter=C.select=function(e,t,i){var n=[];return null==e?n:g&&e.filter===g?e.filter(t,i):(S(e,function(e,o,a){t.call(i,e,o,a)&&n.push(e)}),n)},C.reject=function(e,t,i){return C.filter(e,function(e,n,o){return!t.call(i,e,n,o)},i)},C.every=C.all=function(e,t,n){t||(t=C.identity);var o=!0;return null==e?o:m&&e.every===m?e.every(t,n):(S(e,function(e,a,s){return(o=o&&t.call(n,e,a,s))?void 0:i}),!!o)};var j=C.some=C.any=function(e,t,n){t||(t=C.identity);var o=!1;return null==e?o:v&&e.some===v?e.some(t,n):(S(e,function(e,a,s){return o||(o=t.call(n,e,a,s))?i:void 0}),!!o)};C.contains=C.include=function(e,t){return null!=e&&(w&&e.indexOf===w?-1!=e.indexOf(t):j(e,function(e){return e===t}))},C.invoke=function(e,t){var i=r.call(arguments,2),n=C.isFunction(t);return C.map(e,function(e){return(n?t:e[t]).apply(e,i)})},C.pluck=function(e,t){return C.map(e,function(e){return e[t]})},C.where=function(e,t,i){return C.isEmpty(t)?i?void 0:[]:C[i?"find":"filter"](e,function(e){for(var i in t)if(t[i]!==e[i])return!1;return!0})},C.findWhere=function(e,t){return C.where(e,t,!0)},C.max=function(e,t,i){if(!t&&C.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.max.apply(Math,e);if(!t&&C.isEmpty(e))return-1/0;var n={computed:-1/0,value:-1/0};return S(e,function(e,o,a){var s=t?t.call(i,e,o,a):e;s>n.computed&&(n={value:e,computed:s})}),n.value},C.min=function(e,t,i){if(!t&&C.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.min.apply(Math,e);if(!t&&C.isEmpty(e))return 1/0;var n={computed:1/0,value:1/0};return S(e,function(e,o,a){var s=t?t.call(i,e,o,a):e;s<n.computed&&(n={value:e,computed:s})}),n.value},C.shuffle=function(e){var t,i=0,n=[];return S(e,function(e){t=C.random(i++),n[i-1]=n[t],n[t]=e}),n},C.sample=function(e,t,i){return arguments.length<2||i?e[C.random(e.length-1)]:C.shuffle(e).slice(0,Math.max(0,t))};var T=function(e){return C.isFunction(e)?e:function(t){return t[e]}};C.sortBy=function(e,t,i){var n=T(t);return C.pluck(C.map(e,function(e,t,o){return{value:e,index:t,criteria:n.call(i,e,t,o)}}).sort(function(e,t){var i=e.criteria,n=t.criteria;if(i!==n){if(i>n||void 0===i)return 1;if(n>i||void 0===n)return-1}return e.index-t.index}),"value")};var x=function(e){return function(t,i,n){var o={},a=null==i?C.identity:T(i);return S(t,function(i,s){var r=a.call(n,i,s,t);e(o,r,i)}),o}};C.groupBy=x(function(e,t,i){(C.has(e,t)?e[t]:e[t]=[]).push(i)}),C.indexBy=x(function(e,t,i){e[t]=i}),C.countBy=x(function(e,t){C.has(e,t)?e[t]++:e[t]=1}),C.sortedIndex=function(e,t,i,n){i=null==i?C.identity:T(i);for(var o=i.call(n,t),a=0,s=e.length;s>a;){var r=a+s>>>1;i.call(n,e[r])<o?a=r+1:s=r}return a},C.toArray=function(e){return e?C.isArray(e)?r.call(e):e.length===+e.length?C.map(e,C.identity):C.values(e):[]},C.size=function(e){return null==e?0:e.length===+e.length?e.length:C.keys(e).length},C.first=C.head=C.take=function(e,t,i){return null==e?void 0:null==t||i?e[0]:r.call(e,0,t)},C.initial=function(e,t,i){return r.call(e,0,e.length-(null==t||i?1:t))},C.last=function(e,t,i){return null==e?void 0:null==t||i?e[e.length-1]:r.call(e,Math.max(e.length-t,0))},C.rest=C.tail=C.drop=function(e,t,i){return r.call(e,null==t||i?1:t)},C.compact=function(e){return C.filter(e,C.identity)};var E=function(e,t,i){return t&&C.every(e,C.isArray)?l.apply(i,e):(S(e,function(e){C.isArray(e)||C.isArguments(e)?t?s.apply(i,e):E(e,t,i):i.push(e)}),i)};C.flatten=function(e,t){return E(e,t,[])},C.without=function(e){return C.difference(e,r.call(arguments,1))},C.uniq=C.unique=function(e,t,i,n){C.isFunction(t)&&(n=i,i=t,t=!1);var o=i?C.map(e,i,n):e,a=[],s=[];return S(o,function(i,n){(t?n&&s[s.length-1]===i:C.contains(s,i))||(s.push(i),a.push(e[n]))}),a},C.union=function(){return C.uniq(C.flatten(arguments,!0))},C.intersection=function(e){var t=r.call(arguments,1);return C.filter(C.uniq(e),function(e){return C.every(t,function(t){return C.indexOf(t,e)>=0})})},C.difference=function(e){var t=l.apply(n,r.call(arguments,1));return C.filter(e,function(e){return!C.contains(t,e)})},C.zip=function(){for(var e=C.max(C.pluck(arguments,"length").concat(0)),t=new Array(e),i=0;e>i;i++)t[i]=C.pluck(arguments,""+i);return t},C.object=function(e,t){if(null==e)return{};for(var i={},n=0,o=e.length;o>n;n++)t?i[e[n]]=t[n]:i[e[n][0]]=e[n][1];return i},C.indexOf=function(e,t,i){if(null==e)return-1;var n=0,o=e.length;if(i){if("number"!=typeof i)return n=C.sortedIndex(e,t),e[n]===t?n:-1;n=0>i?Math.max(0,o+i):i}if(w&&e.indexOf===w)return e.indexOf(t,i);for(;o>n;n++)if(e[n]===t)return n;return-1},C.lastIndexOf=function(e,t,i){if(null==e)return-1;var n=null!=i;if(y&&e.lastIndexOf===y)return n?e.lastIndexOf(t,i):e.lastIndexOf(t);for(var o=n?i:e.length;o--;)if(e[o]===t)return o;return-1},C.range=function(e,t,i){arguments.length<=1&&(t=e||0,e=0),i=arguments[2]||1;for(var n=Math.max(Math.ceil((t-e)/i),0),o=0,a=new Array(n);n>o;)a[o++]=e,e+=i;return a};var P=function(){};C.bind=function(e,t){var i,n;if(_&&e.bind===_)return _.apply(e,r.call(arguments,1));if(!C.isFunction(e))throw new TypeError;return i=r.call(arguments,2),n=function(){if(!(this instanceof n))return e.apply(t,i.concat(r.call(arguments)));P.prototype=e.prototype;var o=new P;P.prototype=null;var a=e.apply(o,i.concat(r.call(arguments)));return Object(a)===a?a:o}},C.partial=function(e){var t=r.call(arguments,1);return function(){return e.apply(this,t.concat(r.call(arguments)))}},C.bindAll=function(e){var t=r.call(arguments,1);if(0===t.length)throw new Error("bindAll must be passed function names");return S(t,function(t){e[t]=C.bind(e[t],e)}),e},C.memoize=function(e,t){var i={};return t||(t=C.identity),function(){var n=t.apply(this,arguments);return C.has(i,n)?i[n]:i[n]=e.apply(this,arguments)}},C.delay=function(e,t){var i=r.call(arguments,2);return setTimeout(function(){return e.apply(null,i)},t)},C.defer=function(e){return C.delay.apply(C,[e,1].concat(r.call(arguments,1)))},C.throttle=function(e,t,i){var n,o,a,s=null,r=0;i||(i={});var l=function(){r=!1===i.leading?0:new Date,s=null,a=e.apply(n,o)};return function(){var c=new Date;r||!1!==i.leading||(r=c);var u=t-(c-r);return n=this,o=arguments,0>=u?(clearTimeout(s),s=null,r=c,a=e.apply(n,o)):s||!1===i.trailing||(s=setTimeout(l,u)),a}},C.debounce=function(e,t,i){var n,o,a,s,r;return function(){a=this,o=arguments,s=new Date;var l=function(){var c=new Date-s;t>c?n=setTimeout(l,t-c):(n=null,i||(r=e.apply(a,o)))},c=i&&!n;return n||(n=setTimeout(l,t)),c&&(r=e.apply(a,o)),r}},C.once=function(e){var t,i=!1;return function(){return i?t:(i=!0,t=e.apply(this,arguments),e=null,t)}},C.wrap=function(e,t){return function(){var i=[e];return s.apply(i,arguments),t.apply(this,i)}},C.compose=function(){var e=arguments;return function(){for(var t=arguments,i=e.length-1;i>=0;i--)t=[e[i].apply(this,t)];return t[0]}},C.after=function(e,t){return function(){return--e<1?t.apply(this,arguments):void 0}},C.keys=$||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var t=[];for(var i in e)C.has(e,i)&&t.push(i);return t},C.values=function(e){for(var t=C.keys(e),i=t.length,n=new Array(i),o=0;i>o;o++)n[o]=e[t[o]];return n},C.pairs=function(e){for(var t=C.keys(e),i=t.length,n=new Array(i),o=0;i>o;o++)n[o]=[t[o],e[t[o]]];return n},C.invert=function(e){for(var t={},i=C.keys(e),n=0,o=i.length;o>n;n++)t[e[i[n]]]=i[n];return t},C.functions=C.methods=function(e){var t=[];for(var i in e)C.isFunction(e[i])&&t.push(i);return t.sort()},C.extend=function(e){return S(r.call(arguments,1),function(t){if(t)for(var i in t)e[i]=t[i]}),e},C.pick=function(e){var t={},i=l.apply(n,r.call(arguments,1));return S(i,function(i){i in e&&(t[i]=e[i])}),t},C.omit=function(e){var t={},i=l.apply(n,r.call(arguments,1));for(var o in e)C.contains(i,o)||(t[o]=e[o]);return t},C.defaults=function(e){return S(r.call(arguments,1),function(t){if(t)for(var i in t)void 0===e[i]&&(e[i]=t[i])}),e},C.clone=function(e){return C.isObject(e)?C.isArray(e)?e.slice():C.extend({},e):e},C.tap=function(e,t){return t(e),e};var I=function(e,t,i,n){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return e===t;e instanceof C&&(e=e._wrapped),t instanceof C&&(t=t._wrapped);var o=c.call(e);if(o!=c.call(t))return!1;switch(o){case"[object String]":return e==String(t);case"[object Number]":return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if("object"!=typeof e||"object"!=typeof t)return!1;for(var a=i.length;a--;)if(i[a]==e)return n[a]==t;var s=e.constructor,r=t.constructor;if(s!==r&&!(C.isFunction(s)&&s instanceof s&&C.isFunction(r)&&r instanceof r))return!1;i.push(e),n.push(t);var l=0,u=!0;if("[object Array]"==o){if(l=e.length,u=l==t.length)for(;l--&&(u=I(e[l],t[l],i,n)););}else{for(var h in e)if(C.has(e,h)&&(l++,!(u=C.has(t,h)&&I(e[h],t[h],i,n))))break;if(u){for(h in t)if(C.has(t,h)&&!l--)break;u=!l}}return i.pop(),n.pop(),u};C.isEqual=function(e,t){return I(e,t,[],[])},C.isEmpty=function(e){if(null==e)return!0;if(C.isArray(e)||C.isString(e))return 0===e.length;for(var t in e)if(C.has(e,t))return!1;return!0},C.isElement=function(e){return!(!e||1!==e.nodeType)},C.isArray=b||function(e){return"[object Array]"==c.call(e)},C.isObject=function(e){return e===Object(e)},S(["Arguments","Function","String","Number","Date","RegExp"],function(e){C["is"+e]=function(t){return c.call(t)=="[object "+e+"]"}}),C.isArguments(arguments)||(C.isArguments=function(e){return!(!e||!C.has(e,"callee"))}),"function"!=typeof/./&&(C.isFunction=function(e){return"function"==typeof e}),C.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},C.isNaN=function(e){return C.isNumber(e)&&e!=+e},C.isBoolean=function(e){return!0===e||!1===e||"[object Boolean]"==c.call(e)},C.isNull=function(e){return null===e},C.isUndefined=function(e){return void 0===e},C.has=function(e,t){return u.call(e,t)},C.noConflict=function(){return e._=t,this},C.identity=function(e){return e},C.times=function(e,t,i){for(var n=Array(Math.max(0,e)),o=0;e>o;o++)n[o]=t.call(i,o);return n},C.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))};var A={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};A.unescape=C.invert(A.escape);var O={escape:new RegExp("["+C.keys(A.escape).join("")+"]","g"),unescape:new RegExp("("+C.keys(A.unescape).join("|")+")","g")};C.each(["escape","unescape"],function(e){C[e]=function(t){return null==t?"":(""+t).replace(O[e],function(t){return A[e][t]})}}),C.result=function(e,t){if(null!=e){var i=e[t];return C.isFunction(i)?i.call(e):i}},C.mixin=function(e){S(C.functions(e),function(t){var i=C[t]=e[t];C.prototype[t]=function(){var e=[this._wrapped];return s.apply(e,arguments),D.call(this,i.apply(C,e))}})};var R=0;C.uniqueId=function(e){var t=++R+"";return e?e+t:t},C.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var N=/(.)^/,B={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t","\u2028":"u2028","\u2029":"u2029"};C.template=function(e,t,i){var n
;i=C.defaults({},i,C.templateSettings);var o=new RegExp([(i.escape||N).source,(i.interpolate||N).source,(i.evaluate||N).source].join("|")+"|$","g"),a=0,s="__p+='";e.replace(o,function(t,i,n,o,r){return s+=e.slice(a,r).replace(/\\|'|\r|\n|\t|\u2028|\u2029/g,function(e){return"\\"+B[e]}),i&&(s+="'+\n((__t=("+i+"))==null?'':_.escape(__t))+\n'"),n&&(s+="'+\n((__t=("+n+"))==null?'':__t)+\n'"),o&&(s+="';\n"+o+"\n__p+='"),a=r+t.length,t}),s+="';\n",i.variable||(s="with(obj||{}){\n"+s+"}\n"),s="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+s+"return __p;\n";try{n=new Function(i.variable||"obj","_",s)}catch(e){throw e.source=s,e}if(t)return n(t,C);var r=function(e){return n.call(this,e,C)};return r.source="function("+(i.variable||"obj")+"){\n"+s+"}",r},C.chain=function(e){return C(e).chain()};var D=function(e){return this._chain?C(e).chain():e};C.mixin(C),S(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=n[e];C.prototype[e]=function(){var i=this._wrapped;return t.apply(i,arguments),"shift"!=e&&"splice"!=e||0!==i.length||delete i[0],D.call(this,i)}}),S(["concat","join","slice"],function(e){var t=n[e];C.prototype[e]=function(){return D.call(this,t.apply(this._wrapped,arguments))}}),C.extend(C.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}).call(this);var Zalora=Zalora||{},Feature=Feature||{};Zalora.jsStore=Zalora.jsStore||{},Feature={features:{},init:function(e){0===Object.keys(this.features).length&&(e=e||Zalora.jsStore,this.features=e)},isFeatureEnabled:function(e){return this.features.hasOwnProperty(e)&&!0===Boolean(this.features[e])}};